import{r as x,by as h,j as e,T as u,n as g,b8 as b,h as p,J as f,B as P,N as v,c9 as T,ca as C,aM as S}from"./index-R703-jZn.js";import{S as w}from"./Save-DQXd9c0C.js";import{c as j,T as y,a as F,b as B,d as R}from"./TableRow-DRKkewUt.js";import{T as r}from"./TableCell-DAW-rVix.js";import{S as D}from"./Switch-DPdBc6tq.js";import{C as E}from"./Container-Cu71wWw0.js";import"./SwitchBase-D4fUKCtc.js";import"./useFormControl-CXpyBcMX.js";function W(n=[]){const[o,s]=x.useState(n),a=x.useCallback((l,t)=>{s(c=>c.map((i,m)=>m===l?{...i,[t]:!i[t]}:i))},[]);return{permissions:o,toggle:a,setPermissions:s}}const k=({index:n,permission:o,onToggle:s})=>e.jsxs(j,{children:[e.jsx(r,{sx:{padding:"0px",paddingX:"10px"},children:e.jsx(u,{variant:"body1",fontWeight:"medium",children:o.name})}),["view","edit","delete"].map(a=>e.jsx(r,{align:"center",sx:{padding:"0px"},children:e.jsx(D,{checked:o[a],onChange:()=>s(n,a),color:a==="delete"?"error":"primary",inputProps:{"aria-label":`${o.name}-${a}`}})},a))]}),z=h.memo(k),A=({permissions:n,onToggle:o})=>e.jsx(y,{component:g,elevation:3,children:e.jsxs(F,{size:"medium",children:[e.jsx(B,{children:e.jsxs(j,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Feature"}),["View","Edit","Delete"].map(s=>e.jsx(r,{align:"center",sx:{fontWeight:600},children:e.jsx(b,{label:s,size:"small",color:s==="Delete"?"error":"primary"})},s))]})}),e.jsx(R,{children:n.map((s,a)=>e.jsx(z,{index:a,permission:s,onToggle:o},s.name))})]})});function X(){const n=p(d=>d.auth.permissions);console.log("initialPermissions",n);const{_id:o}=p(d=>d.auth.user),{permissions:s,toggle:a,setPermissions:l}=W(n),t=f(),[c,i]=h.useState(!1);x.useEffect(()=>{l(n)},[n]);const m=()=>{console.table(s),console.log(o),t(S.updatePermissions(s,o)),i(!0)};return e.jsxs(E,{maxWidth:"md",sx:{overflowY:"auto",height:"100%"},children:[e.jsx(u,{variant:"h4",gutterBottom:!0,children:"Feature Permissions"}),e.jsx(P,{sx:{mb:2},children:e.jsx(v,{variant:"contained",startIcon:e.jsx(w,{}),onClick:m,disabled:s.length===0,children:"Save changes"})}),e.jsx(A,{permissions:s,onToggle:a}),e.jsx(T,{open:c,autoHideDuration:3e3,onClose:()=>i(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(C,{severity:"success",onClose:()=>i(!1),children:"Permissions saved!"})})]})}export{X as default};
//# sourceMappingURL=features.page-CdGPVuJL.js.map
