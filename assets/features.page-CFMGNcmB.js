import{r as u,aw as x,j as e,T as f,n as b,aL as g,h as p,L as j,B as y,q as P,c8 as T,c9 as w,bs as v}from"./index-7pUSThBQ.js";import{S as C}from"./Save-D6agyeYH.js";import{c as h,T as S,a as D,b as I,d as F}from"./TableRow-ClrglGIZ.js";import{T as r}from"./TableCell-Cb86HSZf.js";import{S as B}from"./Switch-B_mewcbH.js";import{C as E}from"./Container-CQtwu5kK.js";import"./SwitchBase-D3X0x81k.js";import"./useFormControl-Dtka1mg5.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new s.Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="a5b91bf9-f50d-4bdc-a57b-f3e58890a61f",s._sentryDebugIdIdentifier="sentry-dbid-a5b91bf9-f50d-4bdc-a57b-f3e58890a61f")}catch{}function R(s=[]){const[n,a]=u.useState(s),o=u.useCallback((l,i)=>{a(d=>d.map((t,c)=>c===l?{...t,[i]:!t[i]}:t))},[]);return{permissions:n,toggle:o,setPermissions:a}}const _=({index:s,permission:n,onToggle:a})=>e.jsxs(h,{children:[e.jsx(r,{sx:{padding:"0px",paddingX:"10px"},children:e.jsx(f,{variant:"body1",fontWeight:"medium",children:n.name})}),["view","edit","delete"].map(o=>e.jsx(r,{align:"center",sx:{padding:"0px"},children:e.jsx(B,{checked:n[o],onChange:()=>a(s,o),color:o==="delete"?"error":"primary",inputProps:{"aria-label":`${n.name}-${o}`}})},o))]}),k=x.memo(_),W=({permissions:s,onToggle:n})=>e.jsx(S,{component:b,elevation:3,children:e.jsxs(D,{size:"medium",children:[e.jsx(I,{children:e.jsxs(h,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Feature"}),["View","Edit","Delete"].map(a=>e.jsx(r,{align:"center",sx:{fontWeight:600},children:e.jsx(g,{label:a,size:"small",color:a==="Delete"?"error":"primary"})},a))]})}),e.jsx(F,{children:s.map((a,o)=>e.jsx(k,{index:o,permission:a,onToggle:n},a.name))})]})});function X(){const s=p(m=>m.auth.permissions);console.log("initialPermissions",s);const{_id:n}=p(m=>m.auth.user),{permissions:a,toggle:o,setPermissions:l}=R(s),i=j(),[d,t]=x.useState(!1);u.useEffect(()=>{l(s)},[s]);const c=()=>{console.table(a),console.log(n),i(v.updatePermissions(a,n)),t(!0)};return e.jsxs(E,{maxWidth:"md",sx:{overflowY:"auto",height:"100%"},children:[e.jsx(f,{variant:"h4",gutterBottom:!0,children:"Feature Permissions"}),e.jsx(y,{sx:{mb:2},children:e.jsx(P,{variant:"contained",startIcon:e.jsx(C,{}),onClick:c,disabled:a.length===0,children:"Save changes"})}),e.jsx(W,{permissions:a,onToggle:o}),e.jsx(T,{open:d,autoHideDuration:3e3,onClose:()=>t(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(w,{severity:"success",onClose:()=>t(!1),children:"Permissions saved!"})})]})}export{X as default};
//# sourceMappingURL=features.page-CFMGNcmB.js.map
