const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Teacher.Form-BQjo-cTH.js","assets/index-CiW8uph1.js","assets/index-ByN57GGS.css","assets/index.esm-DGScvE1h.js","assets/Grid-jCsMlOYl.js","assets/TextField-UuSUkVl8.js","assets/useFormControl-D0QidrAM.js","assets/InputBase-BiLnOMOs.js"])))=>i.map(i=>d[i]);
import{H,a5 as L,a6 as h,a7 as q,a8 as u,N as l,a9 as G,aa as Q,ab as $,ac as J,ad as K,ae as U,af as W,ag as X,ah as Y,_ as Z,$ as ee,ai as ae,aj as te,r as n,ak as se,j as c,B as re,al as oe,am as ce,a0 as ne}from"./index-CiW8uph1.js";import ie from"./GenericModal-Ce5MwfL3.js";import{u as le,R as de}from"./usePaginationParams-ya7hjzbw.js";import"./DialogContent-BtKzm_M3.js";import"./Save-Dt2m0OkB.js";import"./reselect-DY5t-FVV.js";import"./InputBase-BiLnOMOs.js";import"./useFormControl-D0QidrAM.js";import"./TextField-UuSUkVl8.js";import"./InputAdornment-BRM-nYND.js";import"./Checkbox-CHHf8lYy.js";import"./SwitchBase-DVK6orIi.js";import"./FormControlLabel-Bm843qRg.js";import"./KeyboardArrowRight-USXmTfBX.js";import"./CircularProgress-A-Mz8BfY.js";const he=t=>async a=>{var e,m;try{const o=H(t);a(L());const s=await h.getTeachers(o);a(q(s.data.data))}catch(o){a(u()),l.error(((m=(e=o.response)==null?void 0:e.data)==null?void 0:m.data)||"Failed to fetch organizations",{autoClose:3e3})}},ue=t=>async a=>{try{a(W());const e=await h.getTeacherById(t);a(X(e.data.data))}catch(e){a(u()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},me=t=>async a=>{try{a(K());const e=await h.createTeacher(t);return a(U(e.data.data)),e.data}catch(e){a(u()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},fe=t=>async a=>{try{if(a($()),t._id){const e=await h.updateTeacher(t,t._id);return a(J(e.data.data)),e.data}else throw new Error("Teacher ID is required for update")}catch(e){a(u()),e instanceof Error&&l.error(e.message||"Failed to fetch organization",{autoClose:3e3})}},pe=t=>async a=>{try{a(G());const e=await h.deleteTeacher(t);a(Q(t)),l.info(e.message||"Organization deleted successfully",{autoClose:3e3})}catch(e){a(u()),console.log(e),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},d={fetchTeachers:he,fetchTeacherById:ue,createTeachers:me,updateTeachers:fe,deleteTeachers:pe},Te=n.lazy(()=>ne(()=>import("./Teacher.Form-BQjo-cTH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function ze({route:t,routeData:a,canActivate:e}){console.log("routeData",a),console.log(e);const m=Y(),o=Z(),s=ee(r=>r.teacher.data),_=ae(),{data:P,loading:E}=te(t,_);console.log("data",P);const N=n.useMemo(()=>[{field:"name",headerName:"Teacher Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"phone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"qualifications",headerName:"Qualifications",flex:1,editable:!0,headerClassName:"theme--header"},{field:"officeHours",headerName:"Office Hours",flex:1,editable:!0,headerClassName:"theme--header"},{field:"experience",headerName:"Experience",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[R,b]=n.useState({}),[j,x]=n.useState(""),[f,y]=n.useState(null),[C,S]=n.useState(!1),D=se().pathname.includes("/teachers/profile"),v=n.useCallback(r=>{o(d.fetchTeachers(r))},[o]),{params:p,setParams:F}=le({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},v),z=r=>{F(r)},B=()=>{y(null),x("Add Teacher"),w()},M=r=>{const i=s==null?void 0:s.teachers.find(g=>g._id===r);y(i||null),x("Edit Teacher"),w()},O=r=>{const i=s==null?void 0:s.teachers.find(g=>g._id===r);i&&m(ce.TEACHER_PROFILE.replace(":id",i==null?void 0:i._id))},A=async r=>{o(d.deleteTeachers(r))},I=async r=>{o(f?d.updateTeachers({...r,_id:f._id}):d.createTeachers(r)),T()},V=()=>{o(d.fetchTeachers(p))},w=()=>S(!0),T=()=>S(!1),k=(s==null?void 0:s.totalTeachers)||0;return c.jsx(re,{sx:{width:"100%",height:"100%"},children:D?c.jsx(oe,{}):c.jsxs(c.Fragment,{children:[c.jsx(de,{columns:N,onAdd:B,onDelete:A,onEdit:M,rows:(s==null?void 0:s.teachers)??[],rowModesModel:R,setRowModesModel:b,loading:E,reloadData:V,totalRows:k,paginationModel:{page:p.page-1,pageSize:p.limit},onParamsChange:z,onView:O}),c.jsx(ie,{open:C,onClose:T,title:j,children:C&&c.jsx(n.Suspense,{fallback:c.jsx("div",{children:"Loading form..."}),children:c.jsx(Te,{initialValues:f,onSubmit:I,onClose:T})})})]})})}export{ze as default};
//# sourceMappingURL=Teacher.page-D61LqppN.js.map
