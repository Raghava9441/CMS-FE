import{aJ as b,aK as m,r as p,aL as v,j as t,aM as h,a as f,aN as x,aP as $,D as C,bZ as H,T as k,t as N,w as O,$ as w,_ as D,B as F,a3 as A,d0 as z,d1 as E,aZ as W}from"./index-CiW8uph1.js";import{a as I,b as g,T as y,S as X}from"./Save-Dt2m0OkB.js";import{S as Z}from"./Switch-C5VZ8397.js";import{C as _}from"./Container-Ta9BIINs.js";import"./SwitchBase-DVK6orIi.js";import"./useFormControl-D0QidrAM.js";function J(e){return b("MuiTable",e)}m("MuiTable",["root","stickyHeader"]);const K=e=>{const{classes:o,stickyHeader:s}=e;return x({root:["root",s&&"stickyHeader"]},J,o)},L=h("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.stickyHeader&&o.stickyHeader]}})($(({theme:e})=>({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...e.typography.body2,padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:({ownerState:o})=>o.stickyHeader,style:{borderCollapse:"separate"}}]}))),R="table",V=p.forwardRef(function(o,s){const a=v({props:o,name:"MuiTable"}),{className:i,component:r=R,padding:l="normal",size:n="medium",stickyHeader:c=!1,...d}=a,u={...a,component:r,padding:l,size:n,stickyHeader:c},T=K(u),U=p.useMemo(()=>({padding:l,size:n,stickyHeader:c}),[l,n,c]);return t.jsx(I.Provider,{value:U,children:t.jsx(L,{as:r,role:r===R?null:"table",ref:s,className:f(T.root,i),ownerState:u,...d})})});function Y(e){return b("MuiTableBody",e)}m("MuiTableBody",["root"]);const q=e=>{const{classes:o}=e;return x({root:["root"]},Y,o)},G=h("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,o)=>o.root})({display:"table-row-group"}),Q={variant:"body"},j="tbody",ee=p.forwardRef(function(o,s){const a=v({props:o,name:"MuiTableBody"}),{className:i,component:r=j,...l}=a,n={...a,component:r},c=q(n);return t.jsx(g.Provider,{value:Q,children:t.jsx(G,{className:f(c.root,i),as:r,ref:s,role:r===j?null:"rowgroup",ownerState:n,...l})})});function oe(e){return b("MuiTableContainer",e)}m("MuiTableContainer",["root"]);const se=e=>{const{classes:o}=e;return x({root:["root"]},oe,o)},te=h("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,o)=>o.root})({width:"100%",overflowX:"auto"}),ae=p.forwardRef(function(o,s){const a=v({props:o,name:"MuiTableContainer"}),{className:i,component:r="div",...l}=a,n={...a,component:r},c=se(n);return t.jsx(te,{ref:s,as:r,className:f(c.root,i),ownerState:n,...l})});function re(e){return b("MuiTableHead",e)}m("MuiTableHead",["root"]);const ne=e=>{const{classes:o}=e;return x({root:["root"]},re,o)},le=h("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,o)=>o.root})({display:"table-header-group"}),ie={variant:"head"},M="thead",ce=p.forwardRef(function(o,s){const a=v({props:o,name:"MuiTableHead"}),{className:i,component:r=M,...l}=a,n={...a,component:r},c=ne(n);return t.jsx(g.Provider,{value:ie,children:t.jsx(le,{as:r,className:f(c.root,i),ref:s,role:r===M?null:"rowgroup",ownerState:n,...l})})});function de(e){return b("MuiTableRow",e)}const P=m("MuiTableRow",["root","selected","hover","head","footer"]),pe=e=>{const{classes:o,selected:s,hover:a,head:i,footer:r}=e;return x({root:["root",s&&"selected",a&&"hover",i&&"head",r&&"footer"]},de,o)},ue=h("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,s.head&&o.head,s.footer&&o.footer]}})($(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${P.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${P.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:C(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:C(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}}))),S="tr",B=p.forwardRef(function(o,s){const a=v({props:o,name:"MuiTableRow"}),{className:i,component:r=S,hover:l=!1,selected:n=!1,...c}=a,d=p.useContext(g),u={...a,component:r,hover:l,selected:n,head:d&&d.variant==="head",footer:d&&d.variant==="footer"},T=pe(u);return t.jsx(ue,{as:r,ref:s,className:f(T.root,i),role:r===S?null:"row",ownerState:u,...c})});function be(e=[]){const[o,s]=p.useState(e),a=p.useCallback((i,r)=>{s(l=>l.map((n,c)=>c===i?{...n,[r]:!n[r]}:n))},[]);return{permissions:o,toggle:a,setPermissions:s}}const me=({index:e,permission:o,onToggle:s})=>t.jsxs(B,{children:[t.jsx(y,{sx:{padding:"0px",paddingX:"10px"},children:t.jsx(k,{variant:"body1",fontWeight:"medium",children:o.name})}),["view","edit","delete"].map(a=>t.jsx(y,{align:"center",sx:{padding:"0px"},children:t.jsx(Z,{checked:o[a],onChange:()=>s(e,a),color:a==="delete"?"error":"primary",inputProps:{"aria-label":`${o.name}-${a}`}})},a))]}),ve=H.memo(me),he=({permissions:e,onToggle:o})=>t.jsx(ae,{component:N,elevation:3,children:t.jsxs(V,{size:"medium",children:[t.jsx(ce,{children:t.jsxs(B,{children:[t.jsx(y,{sx:{fontWeight:600},children:"Feature"}),["View","Edit","Delete"].map(s=>t.jsx(y,{align:"center",sx:{fontWeight:600},children:t.jsx(O,{label:s,size:"small",color:s==="Delete"?"error":"primary"})},s))]})}),t.jsx(ee,{children:e.map((s,a)=>t.jsx(ve,{index:a,permission:s,onToggle:o},s.name))})]})});function we(){const e=w(d=>d.auth.permissions);console.log("initialPermissions",e);const{_id:o}=w(d=>d.auth.user),{permissions:s,toggle:a,setPermissions:i}=be(e),r=D(),[l,n]=H.useState(!1);p.useEffect(()=>{i(e)},[e]);const c=()=>{console.table(s),console.log(o),r(W.updatePermissions(s,o)),n(!0)};return t.jsxs(_,{maxWidth:"md",sx:{overflowY:"auto",height:"100%"},children:[t.jsx(k,{variant:"h4",gutterBottom:!0,children:"Feature Permissions"}),t.jsx(F,{sx:{mb:2},children:t.jsx(A,{variant:"contained",startIcon:t.jsx(X,{}),onClick:c,disabled:s.length===0,children:"Save changes"})}),t.jsx(he,{permissions:s,onToggle:a}),t.jsx(z,{open:l,autoHideDuration:3e3,onClose:()=>n(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:t.jsx(E,{severity:"success",onClose:()=>n(!1),children:"Permissions saved!"})})]})}export{we as default};
//# sourceMappingURL=features.page-BNbtDkDq.js.map
