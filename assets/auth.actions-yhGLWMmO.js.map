{"version":3,"file":"auth.actions-yhGLWMmO.js","sources":["../../src/redux/actions/auth.actions.ts"],"sourcesContent":["import { NavigateFunction } from \"react-router-dom\";\nimport { userApi } from \"../../api/api\";\nimport { loginUserFailure, loginUserStart, loginUserSuccess, logoutUserStart, logoutUserSuccess, permissionSuccess, ShowSnackbar } from \"../slices/authSlice\";\nimport { AppDispatch, persistor } from \"../store\";\nimport appRoutes from \"../../routes/routePaths\";\n\n\nexport const loginUser = (user: { email: string, password: string }, navigate: NavigateFunction) => {\n    return async (dispatch: AppDispatch) => {\n    try {\n        dispatch(loginUserStart());\n        const response = await userApi.login(user);\n        const permissionResponse = await userApi.permissions(response.data.data.loggedInUser._id);\n        dispatch(permissionSuccess(permissionResponse.data));\n        dispatch(loginUserSuccess(response.data));\n        navigate(appRoutes.DASHBOARD);\n        return response.data;\n    } catch (error) {\n        dispatch(loginUserFailure(error.response.data.data))\n        dispatch(\n            ShowSnackbar({\n                severity: 'error',\n                message: error.response.data.data,\n            })\n        );\n    }\n};\n};\n\nexport const logoutUser = (navigate: NavigateFunction) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(logoutUserStart());\n        await persistor.purge();\n        const response = await userApi.logout();\n        dispatch(logoutUserSuccess(response.data));\n\n        navigate(appRoutes.LOGIN);\n        return response.data;\n    } catch (error) {\n        dispatch(\n            ShowSnackbar({\n                severity: 'error',\n                message: error.response.data.data,\n            })\n        );\n    }\n};\nexport const updatePermissions = (permissions: any, id: string) => async (dispatch: AppDispatch) => {\n    try {\n        await userApi.modifyPermissions(permissions, id);\n\n    } catch (error) {\n        dispatch(\n            ShowSnackbar({\n                severity: 'error',\n                message: error.response.data.data,\n            })\n        );\n    }\n};\n\n\nexport const authActions = {\n    loginUser,\n    logoutUser,\n    updatePermissions\n}"],"names":["loginUser","user","navigate","dispatch","loginUserStart","response","userApi","permissionResponse","permissionSuccess","loginUserSuccess","appRoutes","error","loginUserFailure","ShowSnackbar","logoutUser","logoutUserStart","persistor","logoutUserSuccess","updatePermissions","permissions","id","authActions"],"mappings":"8GAOa,MAAAA,EAAY,CAACC,EAA2CC,IAC1D,MAAOC,GAA0B,CACpC,GAAA,CACAA,EAASC,GAAgB,EACzB,MAAMC,EAAW,MAAMC,EAAQ,MAAML,CAAI,EACnCM,EAAqB,MAAMD,EAAQ,YAAYD,EAAS,KAAK,KAAK,aAAa,GAAG,EAC/E,OAAAF,EAAAK,EAAkBD,EAAmB,IAAI,CAAC,EAC1CJ,EAAAM,EAAiBJ,EAAS,IAAI,CAAC,EACxCH,EAASQ,EAAU,SAAS,EACrBL,EAAS,WACXM,EAAO,CACZR,EAASS,EAAiBD,EAAM,SAAS,KAAK,IAAI,CAAC,EACnDR,EACIU,EAAa,CACT,SAAU,QACV,QAASF,EAAM,SAAS,KAAK,IAChC,CAAA,CACL,CAAA,CAER,EAGaG,EAAcZ,GAA+B,MAAOC,GAA0B,CACnF,GAAA,CACAA,EAASY,GAAiB,EAC1B,MAAMC,EAAU,MAAM,EAChB,MAAAX,EAAW,MAAMC,EAAQ,OAAO,EAC7B,OAAAH,EAAAc,EAAkBZ,EAAS,IAAI,CAAC,EAEzCH,EAASQ,EAAU,KAAK,EACjBL,EAAS,WACXM,EAAO,CACZR,EACIU,EAAa,CACT,SAAU,QACV,QAASF,EAAM,SAAS,KAAK,IAChC,CAAA,CACL,CAAA,CAER,EACaO,EAAoB,CAACC,EAAkBC,IAAe,MAAOjB,GAA0B,CAC5F,GAAA,CACM,MAAAG,EAAQ,kBAAkBa,EAAaC,CAAE,QAE1CT,EAAO,CACZR,EACIU,EAAa,CACT,SAAU,QACV,QAASF,EAAM,SAAS,KAAK,IAChC,CAAA,CACL,CAAA,CAER,EAGaU,EAAc,CACvB,UAAArB,EACA,WAAAc,EACA,kBAAAI,CACJ"}