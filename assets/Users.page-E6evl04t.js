import{a as L,g as _,r as S,b as P,j as e,s as I,c as G,K as C,d as Z,m as B,e as E,L as H,M as K,N as X,J as W,o as R,O as v,B as O,T as $,p as F,I as J,Q as A}from"./index-Wd-8jL93.js";import{u as Q,C as o,R as V,G as ee}from"./ReusableDataGrid-PkJBO54C.js";import{G as n}from"./Grid-BItJlU2y.js";import{T as j,F as T,I as D,S as M,a as U}from"./TextField-DVS9y7A2.js";import{D as re}from"./DatePicker-CPBgzmSV.js";import{S as ae,F as se}from"./FormControlLabel-CRMT0ule.js";import"./useId-f-0gxjm5.js";import"./reselect-BvQ8g9LW.js";import"./Popper-CDsUKxV4.js";import"./Tooltip-CQiT63pF.js";import"./Checkbox-C_gto7pG.js";import"./KeyboardArrowRight-Jv_56AXw.js";import"./CircularProgress-2j3MWkQb.js";import"./Skeleton-BR34Hr5U.js";try{let r=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},l=new r.Error().stack;l&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[l]="0ceb249c-a131-4e0c-964f-a54169b38a1e",r._sentryDebugIdIdentifier="sentry-dbid-0ceb249c-a131-4e0c-964f-a54169b38a1e")}catch{}function te(r){return _("MuiSwitch",r)}const h=L("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),le=r=>{const{classes:l,edge:c,size:b,color:d,checked:f,disabled:i}=r,k={root:["root",c&&`edge${C(c)}`,`size${C(b)}`],switchBase:["switchBase",`color${C(d)}`,f&&"checked",i&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},t=Z(k,te,l);return{...l,...t}},ie=I("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(r,l)=>{const{ownerState:c}=r;return[l.root,c.edge&&l[`edge${C(c.edge)}`],l[`size${C(c.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${h.thumb}`]:{width:16,height:16},[`& .${h.switchBase}`]:{padding:4,[`&.${h.checked}`]:{transform:"translateX(16px)"}}}}]}),ne=I(ae,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(r,l)=>{const{ownerState:c}=r;return[l.switchBase,{[`& .${h.input}`]:l.input},c.color!=="default"&&l[`color${C(c.color)}`]]}})(B(({theme:r})=>({position:"absolute",top:0,left:0,zIndex:1,color:r.vars?r.vars.palette.Switch.defaultColor:`${r.palette.mode==="light"?r.palette.common.white:r.palette.grey[300]}`,transition:r.transitions.create(["left","transform"],{duration:r.transitions.duration.shortest}),[`&.${h.checked}`]:{transform:"translateX(20px)"},[`&.${h.disabled}`]:{color:r.vars?r.vars.palette.Switch.defaultDisabledColor:`${r.palette.mode==="light"?r.palette.grey[100]:r.palette.grey[600]}`},[`&.${h.checked} + .${h.track}`]:{opacity:.5},[`&.${h.disabled} + .${h.track}`]:{opacity:r.vars?r.vars.opacity.switchTrackDisabled:`${r.palette.mode==="light"?.12:.2}`},[`& .${h.input}`]:{left:"-100%",width:"300%"}})),B(({theme:r})=>({"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette.action.activeChannel} / ${r.vars.palette.action.hoverOpacity})`:E(r.palette.action.active,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(r.palette).filter(H(["light"])).map(([l])=>({props:{color:l},style:{[`&.${h.checked}`]:{color:(r.vars||r).palette[l].main,"&:hover":{backgroundColor:r.vars?`rgba(${r.vars.palette[l].mainChannel} / ${r.vars.palette.action.hoverOpacity})`:E(r.palette[l].main,r.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${h.disabled}`]:{color:r.vars?r.vars.palette.Switch[`${l}DisabledColor`]:`${r.palette.mode==="light"?K(r.palette[l].main,.62):X(r.palette[l].main,.55)}`}},[`&.${h.checked} + .${h.track}`]:{backgroundColor:(r.vars||r).palette[l].main}}}))]}))),oe=I("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(r,l)=>l.track})(B(({theme:r})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:r.transitions.create(["opacity","background-color"],{duration:r.transitions.duration.shortest}),backgroundColor:r.vars?r.vars.palette.common.onBackground:`${r.palette.mode==="light"?r.palette.common.black:r.palette.common.white}`,opacity:r.vars?r.vars.opacity.switchTrack:`${r.palette.mode==="light"?.38:.3}`}))),de=I("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(r,l)=>l.thumb})(B(({theme:r})=>({boxShadow:(r.vars||r).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),ce=S.forwardRef(function(l,c){const b=P({props:l,name:"MuiSwitch"}),{className:d,color:f="primary",edge:i=!1,size:k="medium",sx:t,...z}=b,w={...b,color:f,edge:i,size:k},m=le(w),a=e.jsx(de,{className:m.thumb,ownerState:w});return e.jsxs(ie,{className:G(m.root,d),sx:t,ownerState:w,children:[e.jsx(ne,{type:"checkbox",icon:a,checkedIcon:a,ref:c,ownerState:w,...z,classes:{...m,root:m.switchBase}}),e.jsx(oe,{className:m.track,ownerState:w})]})}),me=({initialValues:r,onSubmit:l,onClose:c})=>{var m;const{data:b}=W(a=>a.organization),d=(m=b==null?void 0:b.organizations)==null?void 0:m.map(a=>({id:a._id,name:a.name})),f={_id:"",organizations:d||[],organizationId:d?d[0].id:"",username:"",email:"",fullname:"",avatar:"",coverImage:"",age:"",role:"STUDENT",gender:"male",phone:"",address:{street:"",city:"",state:"",zip:"",country:""},status:"active",dateOfBirth:null,biography:"",permissions:[],socialLinks:{facebook:"",twitter:"",linkedin:"",instagram:""},preferences:{notifications:!0,language:"en",theme:"light",timezone:"Asia/Kolkata",currency:"INR",dateFormat:"DD/MM/YYYY"},createdAt:null,updatedAt:null},{control:i,handleSubmit:k,formState:{errors:t},reset:z}=Q({defaultValues:f});S.useEffect(()=>{r&&z({...r,dateOfBirth:r.dateOfBirth?R(r.dateOfBirth):null,createdAt:r.createdAt?R(r.createdAt):null,updatedAt:r.updatedAt?R(r.updatedAt):null})},[r,z]);const w=a=>{const s={...a,dateOfBirth:a.dateOfBirth?a.dateOfBirth.format("YYYY-MM-DD"):null,createdAt:a.createdAt?a.createdAt.format("YYYY-MM-DD"):null,updatedAt:a.updatedAt?a.updatedAt.format("YYYY-MM-DD"):null,organizations:a.organizations,organizationId:a.organizations?a.organizations[0].id:""};l(s)};return e.jsx("form",{onSubmit:k(w),children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"username",control:i,rules:{required:"Username is required"},render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Username",size:"small",fullWidth:!0,margin:"normal",error:!!t.username,helperText:(s=t.username)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"fullname",control:i,rules:{required:"Full name is required"},render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Full Name",size:"small",fullWidth:!0,margin:"normal",error:!!t.fullname,helperText:(s=t.fullname)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(o,{name:"organizations",control:i,rules:{required:"At least one organization is required"},render:({field:a})=>{var s;return e.jsxs(T,{fullWidth:!0,margin:"normal",error:!!t.organizations,children:[e.jsx(D,{children:"Organizations"}),e.jsx(M,{...a,multiple:!0,label:"Organizations",size:"small",renderValue:u=>e.jsx(O,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:u.map(p=>{var x;return e.jsx($,{component:"span",variant:"body2",children:(x=d==null?void 0:d.find(g=>g.id===p))==null?void 0:x.name},p)})}),children:d==null?void 0:d.map(u=>e.jsx(v,{value:u.id,children:u.name},u.id))}),e.jsx(U,{children:(s=t.organizations)==null?void 0:s.message})]})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"email",size:"small",control:i,rules:{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}},render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Email",size:"small",fullWidth:!0,margin:"normal",error:!!t.email,helperText:(s=t.email)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"age",control:i,rules:{required:"Age is required",pattern:{value:/^[0-9]+$/,message:"Age must be a number"}},render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Age",size:"small",fullWidth:!0,margin:"normal",error:!!t.age,helperText:(s=t.age)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"role",control:i,rules:{required:"Role is required"},render:({field:a})=>{var s;return e.jsxs(T,{fullWidth:!0,margin:"normal",error:!!t.role,size:"small",children:[e.jsx(D,{children:"Role"}),e.jsxs(M,{...a,label:"Role",children:[e.jsx(v,{value:"ADMIN",children:"Admin"}),e.jsx(v,{value:"TEACHER",children:"Teacher"}),e.jsx(v,{value:"STUDENT",children:"Student"}),e.jsx(v,{value:"PARENT",children:"Parent"})]}),e.jsx(U,{children:(s=t.role)==null?void 0:s.message})]})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"gender",control:i,rules:{required:"Gender is required"},render:({field:a})=>{var s;return e.jsxs(T,{fullWidth:!0,margin:"normal",error:!!t.gender,size:"small",children:[e.jsx(D,{children:"Gender"}),e.jsxs(M,{...a,label:"Gender",children:[e.jsx(v,{value:"male",children:"Male"}),e.jsx(v,{value:"female",children:"Female"}),e.jsx(v,{value:"other",children:"Other"})]}),e.jsx(U,{children:(s=t.gender)==null?void 0:s.message})]})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"phone",control:i,rules:{pattern:{value:/^[0-9]{10}$/,message:"Invalid phone number"}},render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Phone",size:"small",fullWidth:!0,margin:"normal",error:!!t.phone,helperText:(s=t.phone)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"avatar",control:i,render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Avatar URL",size:"small",fullWidth:!0,margin:"normal",error:!!t.avatar,helperText:(s=t.avatar)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"coverImage",control:i,render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Cover Image URL",size:"small",fullWidth:!0,margin:"normal",error:!!t.coverImage,helperText:(s=t.coverImage)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"dateOfBirth",control:i,render:({field:a})=>{var s;return e.jsx(re,{label:"Date of Birth",value:a.value,onChange:u=>a.onChange(u),slotProps:{textField:{size:"small",fullWidth:!0,error:!!t.dateOfBirth,helperText:(s=t.dateOfBirth)==null?void 0:s.message}}})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"status",control:i,render:({field:a})=>{var s;return e.jsxs(T,{fullWidth:!0,margin:"normal",error:!!t.status,size:"small",children:[e.jsx(D,{children:"Status"}),e.jsxs(M,{...a,label:"Status",children:[e.jsx(v,{value:"active",children:"Active"}),e.jsx(v,{value:"inactive",children:"Inactive"})]}),e.jsx(U,{children:(s=t.status)==null?void 0:s.message})]})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx(o,{name:"biography",control:i,render:({field:a})=>{var s;return e.jsx(j,{...a,label:"Biography",fullWidth:!0,multiline:!0,rows:4,margin:"normal",error:!!t.biography,helperText:(s=t.biography)==null?void 0:s.message})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsx($,{variant:"h6",children:"Address"})}),["street","city","state","zip","country"].map(a=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:`address.${a}`,control:i,render:({field:{onChange:s,value:u}})=>{var p,x,g;return e.jsx(j,{label:a.charAt(0).toUpperCase()+a.slice(1),fullWidth:!0,margin:"normal",size:"small",value:u,onChange:s,error:!!((p=t.address)!=null&&p[a]),helperText:(g=(x=t.address)==null?void 0:x[a])==null?void 0:g.message})}})},a)),e.jsx(n,{item:!0,xs:12,children:e.jsx($,{variant:"h6",children:"Social Links"})}),["facebook","twitter","linkedin","instagram"].map(a=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:`socialLinks.${a}`,control:i,render:({field:{onChange:s,value:u}})=>{var p,x,g;return e.jsx(j,{label:a.charAt(0).toUpperCase()+a.slice(1),fullWidth:!0,margin:"normal",size:"small",value:u,onChange:s,error:!!((p=t.socialLinks)!=null&&p[a]),helperText:(g=(x=t.socialLinks)==null?void 0:x[a])==null?void 0:g.message})}})},a)),e.jsx(n,{item:!0,xs:12,children:e.jsx($,{variant:"h6",children:"Preferences"})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:"preferences.notifications",control:i,render:({field:{onChange:a,value:s}})=>e.jsx(se,{control:e.jsx(ce,{checked:s,onChange:a,color:"primary"}),label:"Notifications"})})}),["language","theme","timezone","currency","dateFormat"].map(a=>e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(o,{name:`preferences.${a}`,control:i,render:({field:{onChange:s,value:u}})=>{var p,x,g;return e.jsx(j,{label:a.charAt(0).toUpperCase()+a.slice(1),fullWidth:!0,margin:"normal",size:"small",value:u,onChange:s,error:!!((p=t.preferences)!=null&&p[a]),helperText:(g=(x=t.preferences)==null?void 0:x[a])==null?void 0:g.message})}})},a)),e.jsx(n,{item:!0,xs:12,children:e.jsxs(O,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[e.jsx(F,{variant:"outlined",color:"primary",onClick:()=>{z(f),c()},children:"Cancel"}),e.jsx(F,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})})]})})};function Ce(){const r=J(),[l,c]=S.useState({}),[b,d]=S.useState(""),[f,i]=S.useState(null),[k,t]=S.useState(!1),z=S.useMemo(()=>[{field:"username",headerName:"Username",flex:1,editable:!0,headerClassName:"theme--header"},{field:"email",headerName:"Email",flex:1,editable:!0,headerClassName:"theme--header"},{field:"fullname",headerName:"Full Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"role",headerName:"Role",flex:1,editable:!0,headerClassName:"theme--header"},{field:"gender",headerName:"Gender",flex:1,editable:!0,headerClassName:"theme--header"},{field:"status",headerName:"Status",flex:1,editable:!0,headerClassName:"theme--header"}],[]),{loading:w,data:m}=W(y=>y.user);S.useEffect(()=>{r(A.fetchUsers())},[r]);const a=()=>{i(null),d("Add User"),g()},s=y=>{const Y=m==null?void 0:m.users.find(q=>q._id===y);i(Y||null),d("Edit User"),g()},u=y=>{r(A.deleteUser(y))},p=async y=>{f!=null&&f._id?r(A.updateUser({...y,_id:f._id})):r(A.createUser(y)),N()},x=()=>{r(A.fetchUsers())},g=()=>t(!0),N=()=>t(!1);return e.jsxs(O,{sx:{width:"100%",height:"100%"},children:[e.jsx(V,{columns:z,onAdd:a,onEdit:s,onDelete:u,rows:(m==null?void 0:m.users)||[],rowModesModel:l,setRowModesModel:c,loading:w,reloadData:x}),e.jsx(ee,{open:k,onClose:N,title:b,children:e.jsx(me,{initialValues:f,onSubmit:p,onClose:N})})]})}export{Ce as default};
//# sourceMappingURL=Users.page-E6evl04t.js.map
