import{h as b,r as C,L as q,j as e,M as A,T as I,B as T,N as v}from"./index-BYPGO0xu.js";import{u as F,C as l}from"./index.esm-DchJ7rh4.js";import{G as n}from"./Grid-BuBS1MM_.js";import{F as y,I as W,S,a as E,T as d}from"./TextField-BQekiIf9.js";import"./useFormControl-59XZlDUP.js";import"./InputBase-JqDfyn6V.js";const U=({initialValues:o,onSubmit:R,onClose:D})=>{var g;const{data:p}=b(r=>r.user),{data:h}=b(r=>r.organization),m=(g=p==null?void 0:p.users)==null?void 0:g.filter(r=>r.role==="TEACHER"),u=h==null?void 0:h.organizations,f={_id:"",userId:"",name:"",phone:"",email:"",organizationId:"",organizations:[],departments:[],subjects:[],qualifications:"",experience:0,officeHours:"",coursesTaught:[],performanceReviews:[],specialResponsibilities:"",createdAt:null,updatedAt:null},{control:t,handleSubmit:H,formState:{errors:s},reset:j}=F({defaultValues:f});C.useEffect(()=>{o&&j({...o,createdAt:o.createdAt?q(o.createdAt):null,updatedAt:o.updatedAt?q(o.updatedAt):null})},[o,j]);const Y=r=>{const i={...r,createdAt:r.createdAt?r.createdAt.format("YYYY-MM-DD"):null,updatedAt:r.updatedAt?r.updatedAt.format("YYYY-MM-DD"):null};R(i)};return e.jsx("form",{onSubmit:H(Y),children:e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"userId",control:t,rules:{required:"User ID is required"},render:({field:r})=>{var i;return e.jsxs(y,{fullWidth:!0,margin:"normal",error:!!s.userId,children:[e.jsx(W,{children:"User ID"}),e.jsx(S,{...r,label:"User ID",renderValue:a=>{var c;return e.jsx(I,{variant:"body2",children:(c=m==null?void 0:m.find(x=>x._id===a))==null?void 0:c.username})},children:m==null?void 0:m.map(a=>e.jsx(A,{value:a._id,children:a.username},a._id))}),e.jsx(E,{children:(i=s.userId)==null?void 0:i.message})]})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"name",control:t,rules:{required:"Name is required"},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Name",fullWidth:!0,margin:"normal",error:!!s.name,helperText:(i=s.name)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"phone",control:t,rules:{required:"Phone is required",pattern:{value:/^[0-9]{10}$/,message:"Invalid phone number"}},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Phone Number",fullWidth:!0,margin:"normal",error:!!s.phone,helperText:(i=s.phone)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"email",control:t,rules:{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Email",fullWidth:!0,margin:"normal",error:!!s.email,helperText:(i=s.email)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"phone",control:t,rules:{pattern:{value:/^[0-9]{10}$/,message:"Invalid phone number"}},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Phone Number",fullWidth:!0,margin:"normal",error:!!s.phone,helperText:(i=s.phone)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"organizationId",control:t,rules:{required:"Organization is required"},render:({field:r})=>{var i;return e.jsxs(y,{fullWidth:!0,margin:"normal",error:!!s.organizationId,children:[e.jsx(W,{children:"Organization"}),e.jsx(S,{...r,label:"Organization",renderValue:a=>e.jsx(T,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:a.map(c=>{var x;return e.jsx(I,{component:"span",variant:"body2",children:(x=u==null?void 0:u.find(z=>z.id===c))==null?void 0:x.name},c)})}),children:u==null?void 0:u.map(a=>e.jsx(A,{value:a.id,children:a.name},a.id))}),e.jsx(E,{children:(i=s.organizationId)==null?void 0:i.message})]})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"qualifications",control:t,rules:{required:"Qualifications is required"},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Qualifications",fullWidth:!0,margin:"normal",error:!!s.qualifications,helperText:(i=s.qualifications)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"experience",control:t,rules:{required:"Experience is required"},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Experience",fullWidth:!0,margin:"normal",error:!!s.experience,helperText:(i=s.experience)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"officeHours",control:t,rules:{required:"Office Hours is required"},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Office Hours",fullWidth:!0,margin:"normal",error:!!s.officeHours,helperText:(i=s.officeHours)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,md:6,children:e.jsx(l,{name:"specialResponsibilities",control:t,rules:{required:"Special Responsibilities is required"},render:({field:r})=>{var i;return e.jsx(d,{...r,label:"Special Responsibilities",fullWidth:!0,margin:"normal",error:!!s.specialResponsibilities,helperText:(i=s.specialResponsibilities)==null?void 0:i.message})}})}),e.jsx(n,{item:!0,xs:12,children:e.jsxs(T,{sx:{display:"flex",justifyContent:"flex-end",gap:2,mt:2},children:[e.jsx(v,{variant:"outlined",color:"primary",onClick:()=>{j(f),D()},children:"Cancel"}),e.jsx(v,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})})]})})};export{U as default};
//# sourceMappingURL=Teacher.Form-DGol3jM4.js.map
