{"version":3,"mappings":"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","names":["fetchExams","params","dispatch","queryParams","parseQueryParams","fetchExamsStart","response","examApi","fetchExamsSuccess","error","toast","_b","_a","fetchExamById","id","fetchExamByIdStart","fetchExamByIdSuccess","createExam","exam","createExamStart","createExamSuccess","updateExam","updateExamStart","updateExamSuccess","deleteExam","deleteExamStart","deleteExamSuccess","examActions","ExamForm","lazy","GenericModal","__vitePreload","ExamPage","useDispatch","columns","useMemo","rowModesModel","setRowModesModel","useState","open","setOpen","modalTitle","setModalTitle","selectedRow","setSelectedRow","exams","loading","useSelector","state","user","accessibleExams","hasPermission","fetchExamsCallback","useCallback","setParams","usePaginationParams","onParamasChange","handleAdd","handleOpen","handleEdit","selectedExam","handleDelete","handleSave","data","handleClose","handleReloadData","totalRows","jsxs","Box","jsx","ReusableDataGrid","Suspense"],"ignoreList":[],"sources":["../../src/redux/actions/exam.actions.ts","../../src/pages/Exam.page.tsx"],"sourcesContent":["import { examApi } from '../../api/api';\nimport { Exam } from '../../types/exam.modal';\nimport { AppDispatch } from '../store';\nimport { \n    createExamStart, \n    createExamSuccess, \n    deleteExamStart, \n    deleteExamSuccess, \n    fetchExamByIdStart, \n    fetchExamByIdSuccess, \n    fetchExamsStart, \n    fetchExamsSuccess, \n    updateExamStart, \n    updateExamSuccess \n} from '../slices/exam.slice';\nimport { toast } from 'react-toastify';\nimport { Params } from '@models/pagination.modals';\nimport { parseQueryParams } from '@utils/parseQueryParams';\n\nconst fetchExams = (params: Params) => async (dispatch: AppDispatch) => {\n    try {\n        const queryParams = parseQueryParams(params);\n\n        dispatch(fetchExamsStart());\n        const response = await examApi.getExams(queryParams);\n        dispatch(fetchExamsSuccess(response.data.data));\n    } catch (error) {\n        toast.error(error.response?.data?.data || 'Failed to fetch exams', {\n            autoClose: 3000,\n        });\n    }\n};\n\nconst fetchExamById = (id: string) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(fetchExamByIdStart());\n        const response = await examApi.getExamById(id);\n        dispatch(fetchExamByIdSuccess(response.data.data));\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to fetch exam', {\n            autoClose: 3000,\n        });\n    }\n};\n\nconst createExam = (exam: Omit<Exam, 'createdAt' | 'updatedAt'>) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(createExamStart());\n        const response = await examApi.createExam(exam);\n        dispatch(createExamSuccess(response.data.data));\n        return response.data;\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to create exam', {\n            autoClose: 3000,\n        });\n    }\n};\n\nconst updateExam = (exam: Omit<Exam, 'createdAt' | 'updatedAt'>) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(updateExamStart());\n        const response = await examApi.updateExam(exam, exam._id);\n        dispatch(updateExamSuccess(response.data.data));\n        return response.data;\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to update exam', {\n            autoClose: 3000,\n        });\n    }\n};\n\nconst deleteExam = (id: string) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(deleteExamStart());\n        const response = await examApi.deleteExam(id);\n        dispatch(deleteExamSuccess(id));\n        toast.info('Exam deleted successfully', {\n            autoClose: 3000,\n        });\n    } catch (error) {\n        toast.error((error as { response?: { data?: { data?: string } } })?.response?.data?.data || 'Failed to delete exam', {\n            autoClose: 3000,\n        });\n    }\n};\n\nexport const examActions = {\n    fetchExams,\n    fetchExamById,\n    createExam,\n    updateExam,\n    deleteExam,\n}\n","import { GridColDef, GridRowId, GridRowModesModel } from '@mui/x-data-grid';\nimport { lazy, Suspense, useCallback, useMemo, useState } from 'react';\nimport { Box } from '@mui/material';\nimport { AppDispatch, RootState } from '@redux/store';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { hasPermission } from \"@utils/auth.ts\";\nimport { examActions } from \"@redux/actions/exam.actions.ts\";\nimport { ReusableDataGrid } from \"@components/ReusableDataGrid.tsx\";\nimport { Params } from '@models/pagination.modals';\nimport { usePaginationParams } from '@hooks/usePaginationParams';\n\nconst ExamForm = lazy(() => import(\"@components/Forms/ExamForm\"));\nconst GenericModal = lazy(() => import(\"@components/GenericModal\"));\n\n/**\n * ExamPage component displays a data grid of exams with CRUD operations.\n * \n * @returns The ExamPage component.\n */\nfunction ExamPage() {\n    const dispatch = useDispatch<AppDispatch>();\n\n    /**\n     * Defines the columns for the data grid.\n     * \n     * @returns An array of column definitions.\n     */\n    const columns: GridColDef[] = useMemo(() => [\n        { field: 'name', headerName: 'Exam Name', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'examType', headerName: 'Exam Type', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'duration', headerName: 'Duration (min)', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'totalMarks', headerName: 'Total Marks', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'startDate', headerName: 'Start Date', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'endDate', headerName: 'End Date', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'schedule', headerName: 'Schedule', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'description', headerName: 'Description', flex: 1, editable: true, headerClassName: 'theme--header' },\n    ], []);\n\n    const [rowModesModel, setRowModesModel] = useState<GridRowModesModel>({});\n    const [open, setOpen] = useState(false);\n    const [modalTitle, setModalTitle] = useState<string | undefined>(undefined);\n    const [selectedRow, setSelectedRow] = useState<any>(null);\n    const { data: exams, loading } = useSelector((state: RootState) => state.exam);\n    const user = useSelector((state: RootState) => state.auth.user);\n\n    /**\n     * Filters exams based on user permissions.\n     * \n     * @returns An array of accessible exams.\n     */\n    const accessibleExams = useMemo(() => {\n        if (!user || !exams?.exams) return [];\n        return exams.exams.filter((exam) =>\n            hasPermission(user, \"exams\", \"view\", exam)\n        );\n    }, [user, exams]);\n\n    const fetchExamsCallback = useCallback(\n        (params: Params) => {\n            dispatch(examActions.fetchExams(params));\n        },\n        [dispatch]\n    );\n\n    const { params, setParams } = usePaginationParams(\n        {\n            page: 1,\n            limit: 10,\n            sortBy: undefined,\n            sortOrder: undefined,\n            searchTerm: undefined,\n            filters: {},\n        },\n        fetchExamsCallback\n    );\n\n    const onParamasChange = (params: Params) => {\n        setParams(params);\n    };\n\n    /**\n     * Handles the add exam action.\n     */\n    const handleAdd = () => {\n        setSelectedRow(null);\n        setModalTitle('Add Exam');\n        handleOpen();\n    };\n\n    /**\n     * Handles the edit exam action.\n     * \n     * @param {GridRowId} id - The ID of the exam to edit.\n     */\n    const handleEdit = (id: GridRowId) => {\n        const selectedExam = exams?.exams.find((exam: any) => exam._id === id);\n        setSelectedRow(selectedExam);\n        setModalTitle('Edit Exam');\n        handleOpen();\n    };\n\n    /**\n     * Handles the delete exam action.\n     * \n     * @param {string} id - The ID of the exam to delete.\n     */\n    const handleDelete = async (id: string) => {\n        dispatch(examActions.deleteExam(id));\n    };\n\n    /**\n     * Handles the save exam action.\n     * \n     * @param {any} data - The data to save.\n     */\n    const handleSave = async (data: any) => {\n        if (selectedRow) {\n            dispatch(examActions.updateExam({ id: selectedRow._id, ...data }));\n        } else {\n            dispatch(examActions.createExam(data));\n        }\n        handleClose();\n    };\n\n    /**\n     * Handles the reload data action.\n     */\n    const handleReloadData = () => {\n        dispatch(examActions.fetchExams(params));\n    };\n\n    /**\n     * Opens the modal.\n     */\n    const handleOpen = () => setOpen(true);\n    /**\n     * Closes the modal.\n     */\n    const handleClose = () => setOpen(false);\n\n    const totalRows = exams?.totalExams || 0;\n\n    return (\n        <Box sx={{\n            width: '100%',\n            height: '100%',\n            minWidth: 0,\n            overflow: 'hidden',\n        }}>\n            <ReusableDataGrid\n                columns={columns}\n                onAdd={handleAdd}\n                onDelete={handleDelete}\n                onEdit={handleEdit}\n                rows={accessibleExams ?? []}\n                rowModesModel={rowModesModel}\n                setRowModesModel={setRowModesModel}\n                loading={loading}\n                reloadData={handleReloadData}\n                totalRows={totalRows}\n                paginationModel={{\n                    page: params.page - 1,\n                    pageSize: params.limit,\n                }}\n                onParamsChange={(params) => onParamasChange(params)}\n            />\n            {open && (\n                <Suspense fallback={<div>Loading modal...</div>}>\n                    <GenericModal\n                        open={open}\n                        onClose={handleClose}\n                        title={modalTitle}\n                    >\n                        <Suspense fallback={<div>Loading form...</div>}>\n                            <ExamForm\n                                initialValues={selectedRow}\n                                onSubmit={handleSave}\n                                onClose={handleClose}\n                            />\n                        </Suspense>\n                    </GenericModal>\n                </Suspense>\n            )}\n        </Box>\n    );\n}\n\nexport default ExamPage;"],"file":"assets/Exam.page-BNkaLy1-.js"}