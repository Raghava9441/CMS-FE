const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Teacher.Form-mEL60mnm.js","assets/index-B6Q5p1mB.js","assets/index-FJl57olM.css","assets/index.esm-BWg4JeyN.js","assets/Grid-BZIlOCxN.js","assets/TextField-CqXArht2.js","assets/useFormControl-BFweTqSu.js","assets/InputBase-DvqLZ0SM.js"])))=>i.map(i=>d[i]);
import{p as L,Q as q,U as h,V as H,W as u,v as i,X as Q,Y as G,Z as J,$ as K,a0 as U,a1 as W,a2 as X,a3 as Y,a4 as Z,J as $,h as ee,a5 as ae,a6 as te,r as c,i as se,j as n,B as re,a7 as oe,a8 as ne,K as ce}from"./index-B6Q5p1mB.js";import de from"./GenericModal-lxnmMOUT.js";import{u as ie,R as le}from"./usePaginationParams-BufhDkfw.js";import"./DialogContent-ITkyIvN5.js";import"./Save-BBcKUFz4.js";import"./reselect-C7xKFEgn.js";import"./InputBase-DvqLZ0SM.js";import"./useFormControl-BFweTqSu.js";import"./TextField-CqXArht2.js";import"./InputAdornment-BOLYg3Uk.js";import"./Checkbox-BMGwJpsF.js";import"./SwitchBase-BDBXzfmE.js";import"./FormControlLabel-Dlj7SghN.js";import"./KeyboardArrowRight-B3CRtIMa.js";import"./TableCell-CnYRmD86.js";import"./CircularProgress-BiVxsZzW.js";try{let t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="d3e47e49-5e33-4dfa-92a2-fc31cbb52ad5",t._sentryDebugIdIdentifier="sentry-dbid-d3e47e49-5e33-4dfa-92a2-fc31cbb52ad5")}catch{}const he=t=>async e=>{var a,f;try{const o=L(t);e(q());const s=await h.getTeachers(o);e(H(s.data.data))}catch(o){e(u()),i.error(((f=(a=o.response)==null?void 0:a.data)==null?void 0:f.data)||"Failed to fetch organizations",{autoClose:3e3})}},ue=t=>async e=>{try{e(X());const a=await h.getTeacherById(t);e(Y(a.data.data))}catch(a){e(u()),i.error(a.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},fe=t=>async e=>{try{e(U());const a=await h.createTeacher(t);return e(W(a.data.data)),a.data}catch(a){e(u()),i.error(a.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},me=t=>async e=>{try{if(e(J()),t._id){const a=await h.updateTeacher(t,t._id);return e(K(a.data.data)),a.data}else throw new Error("Teacher ID is required for update")}catch(a){e(u()),a instanceof Error&&i.error(a.message||"Failed to fetch organization",{autoClose:3e3})}},pe=t=>async e=>{try{e(Q());const a=await h.deleteTeacher(t);e(G(t)),i.info(a.message||"Organization deleted successfully",{autoClose:3e3})}catch(a){e(u()),console.log(a),i.error(a.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},l={fetchTeachers:he,fetchTeacherById:ue,createTeachers:fe,updateTeachers:me,deleteTeachers:pe},Te=c.lazy(()=>ce(()=>import("./Teacher.Form-mEL60mnm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function ze({route:t,routeData:e,canActivate:a}){console.log("routeData",e),console.log(a);const f=Z(),o=$(),s=ee(r=>r.teacher.data),S=ae(),{data:_,loading:D}=te(t,S);console.log("data",_);const E=c.useMemo(()=>[{field:"name",headerName:"Teacher Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"phone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"qualifications",headerName:"Qualifications",flex:1,editable:!0,headerClassName:"theme--header"},{field:"officeHours",headerName:"Office Hours",flex:1,editable:!0,headerClassName:"theme--header"},{field:"experience",headerName:"Experience",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[P,R]=c.useState({}),[I,y]=c.useState(""),[m,b]=c.useState(null),[w,x]=c.useState(!1),N=se().pathname.includes("/teachers/profile"),j=c.useCallback(r=>{o(l.fetchTeachers(r))},[o]),{params:p,setParams:v}=ie({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},j),F=r=>{v(r)},z=()=>{b(null),y("Add Teacher"),C()},B=r=>{const d=s==null?void 0:s.teachers.find(g=>g._id===r);b(d||null),y("Edit Teacher"),C()},M=r=>{const d=s==null?void 0:s.teachers.find(g=>g._id===r);d&&f(ne.TEACHER_PROFILE.replace(":id",d==null?void 0:d._id))},O=async r=>{o(l.deleteTeachers(r))},A=async r=>{o(m?l.updateTeachers({...r,_id:m._id}):l.createTeachers(r)),T()},V=()=>{o(l.fetchTeachers(p))},C=()=>x(!0),T=()=>x(!1),k=(s==null?void 0:s.totalTeachers)||0;return n.jsx(re,{sx:{width:"100%",height:"100%"},children:N?n.jsx(oe,{}):n.jsxs(n.Fragment,{children:[n.jsx(le,{columns:E,onAdd:z,onDelete:O,onEdit:B,rows:(s==null?void 0:s.teachers)??[],rowModesModel:P,setRowModesModel:R,loading:D,reloadData:V,totalRows:k,paginationModel:{page:p.page-1,pageSize:p.limit},onParamsChange:F,onView:M}),n.jsx(de,{open:w,onClose:T,title:I,children:w&&n.jsx(c.Suspense,{fallback:n.jsx("div",{children:"Loading form..."}),children:n.jsx(Te,{initialValues:m,onSubmit:A,onClose:T})})})]})})}export{ze as default};
//# sourceMappingURL=Teacher.page-C-bLxEcw.js.map
