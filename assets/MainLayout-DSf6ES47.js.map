{"version":3,"file":"MainLayout-DSf6ES47.js","sources":["../../node_modules/@mui/material/ListItemButton/ListItemButton.js","../../node_modules/@mui/icons-material/esm/ArrowBackIos.js","../../node_modules/@mui/icons-material/esm/ArrowForwardIos.js","../../node_modules/@mui/icons-material/esm/Flag.js","../../node_modules/@mui/icons-material/esm/Logout.js","../../node_modules/@mui/icons-material/esm/NotificationsNone.js","../../src/hooks/usesocket.ts","../../src/utils/routes.utills.ts","../../src/components/MainLayout.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { alpha } from '@mui/system/colorManipulator';\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport rootShouldForwardProp from \"../styles/rootShouldForwardProp.js\";\nimport ButtonBase from \"../ButtonBase/index.js\";\nimport useEnhancedEffect from \"../utils/useEnhancedEffect.js\";\nimport useForkRef from \"../utils/useForkRef.js\";\nimport ListContext from \"../List/ListContext.js\";\nimport listItemButtonClasses, { getListItemButtonUtilityClass } from \"./listItemButtonClasses.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport const overridesResolver = (props, styles) => {\n  const {\n    ownerState\n  } = props;\n  return [styles.root, ownerState.dense && styles.dense, ownerState.alignItems === 'flex-start' && styles.alignItemsFlexStart, ownerState.divider && styles.divider, !ownerState.disableGutters && styles.gutters];\n};\nconst useUtilityClasses = ownerState => {\n  const {\n    alignItems,\n    classes,\n    dense,\n    disabled,\n    disableGutters,\n    divider,\n    selected\n  } = ownerState;\n  const slots = {\n    root: ['root', dense && 'dense', !disableGutters && 'gutters', divider && 'divider', disabled && 'disabled', alignItems === 'flex-start' && 'alignItemsFlexStart', selected && 'selected']\n  };\n  const composedClasses = composeClasses(slots, getListItemButtonUtilityClass, classes);\n  return {\n    ...classes,\n    ...composedClasses\n  };\n};\nconst ListItemButtonRoot = styled(ButtonBase, {\n  shouldForwardProp: prop => rootShouldForwardProp(prop) || prop === 'classes',\n  name: 'MuiListItemButton',\n  slot: 'Root',\n  overridesResolver\n})(memoTheme(({\n  theme\n}) => ({\n  display: 'flex',\n  flexGrow: 1,\n  justifyContent: 'flex-start',\n  alignItems: 'center',\n  position: 'relative',\n  textDecoration: 'none',\n  minWidth: 0,\n  boxSizing: 'border-box',\n  textAlign: 'left',\n  paddingTop: 8,\n  paddingBottom: 8,\n  transition: theme.transitions.create('background-color', {\n    duration: theme.transitions.duration.shortest\n  }),\n  '&:hover': {\n    textDecoration: 'none',\n    backgroundColor: (theme.vars || theme).palette.action.hover,\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: 'transparent'\n    }\n  },\n  [`&.${listItemButtonClasses.selected}`]: {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / ${theme.vars.palette.action.selectedOpacity})` : alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity),\n    [`&.${listItemButtonClasses.focusVisible}`]: {\n      backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / calc(${theme.vars.palette.action.selectedOpacity} + ${theme.vars.palette.action.focusOpacity}))` : alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.focusOpacity)\n    }\n  },\n  [`&.${listItemButtonClasses.selected}:hover`]: {\n    backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / calc(${theme.vars.palette.action.selectedOpacity} + ${theme.vars.palette.action.hoverOpacity}))` : alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity + theme.palette.action.hoverOpacity),\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      backgroundColor: theme.vars ? `rgba(${theme.vars.palette.primary.mainChannel} / ${theme.vars.palette.action.selectedOpacity})` : alpha(theme.palette.primary.main, theme.palette.action.selectedOpacity)\n    }\n  },\n  [`&.${listItemButtonClasses.focusVisible}`]: {\n    backgroundColor: (theme.vars || theme).palette.action.focus\n  },\n  [`&.${listItemButtonClasses.disabled}`]: {\n    opacity: (theme.vars || theme).palette.action.disabledOpacity\n  },\n  variants: [{\n    props: ({\n      ownerState\n    }) => ownerState.divider,\n    style: {\n      borderBottom: `1px solid ${(theme.vars || theme).palette.divider}`,\n      backgroundClip: 'padding-box'\n    }\n  }, {\n    props: {\n      alignItems: 'flex-start'\n    },\n    style: {\n      alignItems: 'flex-start'\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => !ownerState.disableGutters,\n    style: {\n      paddingLeft: 16,\n      paddingRight: 16\n    }\n  }, {\n    props: ({\n      ownerState\n    }) => ownerState.dense,\n    style: {\n      paddingTop: 4,\n      paddingBottom: 4\n    }\n  }]\n})));\nconst ListItemButton = /*#__PURE__*/React.forwardRef(function ListItemButton(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiListItemButton'\n  });\n  const {\n    alignItems = 'center',\n    autoFocus = false,\n    component = 'div',\n    children,\n    dense = false,\n    disableGutters = false,\n    divider = false,\n    focusVisibleClassName,\n    selected = false,\n    className,\n    ...other\n  } = props;\n  const context = React.useContext(ListContext);\n  const childContext = React.useMemo(() => ({\n    dense: dense || context.dense || false,\n    alignItems,\n    disableGutters\n  }), [alignItems, context.dense, dense, disableGutters]);\n  const listItemRef = React.useRef(null);\n  useEnhancedEffect(() => {\n    if (autoFocus) {\n      if (listItemRef.current) {\n        listItemRef.current.focus();\n      } else if (process.env.NODE_ENV !== 'production') {\n        console.error('MUI: Unable to set focus to a ListItemButton whose component has not been rendered.');\n      }\n    }\n  }, [autoFocus]);\n  const ownerState = {\n    ...props,\n    alignItems,\n    dense: childContext.dense,\n    disableGutters,\n    divider,\n    selected\n  };\n  const classes = useUtilityClasses(ownerState);\n  const handleRef = useForkRef(listItemRef, ref);\n  return /*#__PURE__*/_jsx(ListContext.Provider, {\n    value: childContext,\n    children: /*#__PURE__*/_jsx(ListItemButtonRoot, {\n      ref: handleRef,\n      href: other.href || other.to\n      // `ButtonBase` processes `href` or `to` if `component` is set to 'button'\n      ,\n      component: (other.href || other.to) && component === 'div' ? 'button' : component,\n      focusVisibleClassName: clsx(classes.focusVisible, focusVisibleClassName),\n      ownerState: ownerState,\n      className: clsx(classes.root, className),\n      ...other,\n      classes: classes,\n      children: children\n    })\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? ListItemButton.propTypes /* remove-proptypes */ = {\n  // â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Warning â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  // â”‚ These PropTypes are generated from the TypeScript type definitions. â”‚\n  // â”‚    To update them, edit the d.ts file and run `pnpm proptypes`.     â”‚\n  // â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n  /**\n   * Defines the `align-items` style property.\n   * @default 'center'\n   */\n  alignItems: PropTypes.oneOf(['center', 'flex-start']),\n  /**\n   * If `true`, the list item is focused during the first mount.\n   * Focus will also be triggered if the value changes from false to true.\n   * @default false\n   */\n  autoFocus: PropTypes.bool,\n  /**\n   * The content of the component if a `ListItemSecondaryAction` is used it must\n   * be the last child.\n   */\n  children: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n  /**\n   * If `true`, compact vertical padding designed for keyboard and mouse input is used.\n   * The prop defaults to the value inherited from the parent List component.\n   * @default false\n   */\n  dense: PropTypes.bool,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, the left and right padding is removed.\n   * @default false\n   */\n  disableGutters: PropTypes.bool,\n  /**\n   * If `true`, a 1px light border is added to the bottom of the list item.\n   * @default false\n   */\n  divider: PropTypes.bool,\n  /**\n   * This prop can help identify which element has keyboard focus.\n   * The class name will be applied when the element gains the focus through keyboard interaction.\n   * It's a polyfill for the [CSS :focus-visible selector](https://drafts.csswg.org/selectors-4/#the-focus-visible-pseudo).\n   * The rationale for using this feature [is explained here](https://github.com/WICG/focus-visible/blob/HEAD/explainer.md).\n   * A [polyfill can be used](https://github.com/WICG/focus-visible) to apply a `focus-visible` class to other components\n   * if needed.\n   */\n  focusVisibleClassName: PropTypes.string,\n  /**\n   * @ignore\n   */\n  href: PropTypes.string,\n  /**\n   * Use to apply selected styling.\n   * @default false\n   */\n  selected: PropTypes.bool,\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default ListItemButton;","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z\"\n}), 'ArrowBackIos');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z\"\n}), 'ArrowForwardIos');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z\"\n}), 'Flag');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z\"\n}), 'Logout');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z\"\n}), 'NotificationsNone');","import { useEffect, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { AppDispatch, RootState } from '../redux/store';\nimport { connectSocket, socket } from '../utils/socket'; // Assuming @utils/socket resolves correctly\nimport { setIsOptimistic, updateMsgConvo, updateTypingConvo } from '../redux/slices/chat.slice';\nimport { permissionSuccess, ShowSnackbar, updateOnlineUsers } from '../redux/slices/authSlice';\nimport { GetConversations, GetMessages } from '../redux/actions/chat.actions';\nimport { GetOnlineFriends } from '../redux/actions/userActions';\n\ninterface SocketError {\n    status?: string;\n    code?: string;\n    message: string;\n    context?: string;\n    errorId?: string;\n}\n\nexport const useSocketManager = () => {\n    const dispatch = useDispatch<AppDispatch>();\n    const { accessToken, user } = useSelector((state: RootState) => state.auth);\n    const { activeConversation } = useSelector((state: RootState) => state.chat);\n\n    const handleConnect = useCallback(() => {\n        console.log(\"Socket connected successfully\");\n        if (user?._id) {\n            socket.emit(\"user_online\", { user_id: user._id });\n        }\n        if (activeConversation?._id) {\n            console.log(\"Syncing messages for active conversation:\", activeConversation._id);\n            dispatch(GetMessages(activeConversation._id));\n        }\n        dispatch(ShowSnackbar({ severity: \"success\", message: \"Connected to chat server!\" }));\n    }, [user?._id, activeConversation?._id, dispatch]);\n\n    const handleConnectionEstablished = useCallback((data: any) => {\n        console.log(\"Received initial connection response from server:\", data);\n        // You might not need a snackbar for this specific event if 'connect' already shows one.\n        // Or reserve this for more specific server-sent connection info.\n        // dispatch(ShowSnackbar({ severity: \"success\", message: data.message || \"Connection established\" }));\n    }, [dispatch]);\n\n    const handleConnectError = useCallback((error: Error) => {\n        console.error(\"Socket connection error:\", error);\n        dispatch(ShowSnackbar({ severity: \"error\", message: `Connection failed: ${error.message}` }));\n    }, [dispatch]);\n\n    const handleSocketError = useCallback((error: SocketError) => {\n        console.error(\"Socket error:\", error);\n        dispatch(ShowSnackbar({\n            severity: error.status === \"error\" ? \"error\" : \"warning\", // Use warning for non-critical, error for critical\n            message: `Server Error (${error.code || 'UNKNOWN'}): ${error.message}${error.errorId ? ` (ID: ${error.errorId})` : ''}`,\n        }));\n    }, [dispatch]);\n\n    const handleMessageReceived = useCallback((message: any) => {\n        console.log(\"ðŸ“¨ New message received:\", message);\n        dispatch(updateMsgConvo(message));\n\n        if (message.sender?._id !== user?._id) {\n            dispatch(ShowSnackbar({\n                severity: \"info\",\n                message: `New message from ${message.sender?.firstName || 'Someone'}`,\n            }));\n        }\n    }, [user?._id, dispatch]);\n\n    // This event isn't in your server code, but you had `message_error` handler in client.\n    // Ensure your server emits this or adjust client expectations.\n    const handleMessageError = useCallback((error: any) => {\n        console.error(\"âŒ Message error:\", error);\n        dispatch(ShowSnackbar({\n            severity: \"error\",\n            message: `Failed to send message: ${error.message || error.error || \"Unknown error\"}`,\n        }));\n        // Optional: Implement logic to mark message as failed in UI/state\n        // dispatch(updateMessageStatus({ tempId: error.tempId, status: 'failed' }));\n    }, [dispatch]);\n\n    const handleOnlineFriends = useCallback((friendData: any) => {\n        console.log(\"ðŸ‘¥ Online friends update:\", friendData);\n        dispatch(updateOnlineUsers(friendData));\n    }, [dispatch]);\n\n    const handleStartTyping = useCallback((typingData: any) => {\n        console.log(\"âœï¸ User started typing:\", typingData);\n        dispatch(updateTypingConvo({ ...typingData, isTyping: true }));\n    }, [dispatch]);\n\n    const handleStopTyping = useCallback((typingData: any) => {\n        console.log(\"âœï¸ User stopped typing:\", typingData);\n        dispatch(updateTypingConvo({ ...typingData, isTyping: false }));\n    }, [dispatch]);\n\n    const handleMessageSync = useCallback((messages: any) => {\n        console.log(\"ðŸ”„ Syncing messages:\", messages);\n        if (Array.isArray(messages)) {\n            messages.forEach(message => dispatch(updateMsgConvo(message)));\n        } else if (messages) { // Handle single message case if server sends one\n            dispatch(updateMsgConvo(messages));\n        }\n        dispatch(ShowSnackbar({ severity: \"info\", message: `Synced ${Array.isArray(messages) ? messages.length : 1} new message(s).` }));\n    }, [dispatch]);\n\n    const handleServerShutdown = useCallback(() => {\n        console.warn(\"ðŸš¨ Server is shutting down!\");\n        dispatch(ShowSnackbar({\n            severity: \"warning\",\n            message: \"Chat server is shutting down. You may be disconnected.\",\n            duration: 0 // Keep open indefinitely until user acknowledges or reconnects\n        }));\n    }, [dispatch]);\n\n    const handlePermissionUpdted = useCallback((data) => {\n        console.log(\"ðŸ“¤ Received updated permissions from server:\", data);\n        dispatch(permissionSuccess(data));\n    }, [dispatch]);\n\n    // --- Main Effect for Socket Management ---\n    useEffect(() => {\n        dispatch(setIsOptimistic({ isOptimistic: true }));\n\n        // Only connect if not already connected and accessToken is available\n        if (accessToken && (!socket || !socket.connected)) {\n            console.log(\"Attempting to connect socket...\");\n            connectSocket(accessToken);\n        }\n\n        if (socket) {\n            socket.on(\"connect\", handleConnect);\n            socket.on(\"connection_established\", handleConnectionEstablished);\n            socket.on(\"connect_error\", handleConnectError);\n            socket.on(\"error\", handleSocketError); // General server-side errors\n            socket.on(\"message_received\", handleMessageReceived);\n            socket.on(\"message_error\", handleMessageError); // If your server sends this\n            socket.on(\"online_friends\", handleOnlineFriends);\n            socket.on(\"start_typing\", handleStartTyping);\n            socket.on(\"stop_typing\", handleStopTyping);\n            socket.on(\"message_sync\", handleMessageSync);\n            socket.on(\"server_shutdown\", handleServerShutdown); // For graceful shutdown\n            socket.on(\"permissions_updated\", handlePermissionUpdted); // For graceful shutdown\n\n            return () => {\n                console.log(\"Cleaning up socket listeners...\");\n                socket.off(\"connect\", handleConnect);\n                socket.off(\"connection_established\", handleConnectionEstablished);\n                socket.off(\"connect_error\", handleConnectError);\n                socket.off(\"error\", handleSocketError);\n                socket.off(\"message_received\", handleMessageReceived);\n                socket.off(\"message_error\", handleMessageError);\n                socket.off(\"online_friends\", handleOnlineFriends);\n                socket.off(\"start_typing\", handleStartTyping);\n                socket.off(\"stop_typing\", handleStopTyping);\n                socket.off(\"message_sync\", handleMessageSync);\n                socket.off(\"server_shutdown\", handleServerShutdown);\n\n                // Optional: Disconnect socket when MainLayout unmounts IF you want to force disconnect.\n                // Be careful with this for single-page apps where MainLayout might remount.\n                // A better approach for logout is to explicitly call socket.disconnect() then.\n                // For now, let's assume socket connection persists until explicitly logged out.\n            };\n        }\n    }, [\n        accessToken,\n        dispatch,\n        user?._id,\n        activeConversation?._id,\n        handleConnect,\n        handleConnectionEstablished,\n        handleConnectError,\n        handleSocketError,\n        handleMessageReceived,\n        handleMessageError,\n        handleOnlineFriends,\n        handleStartTyping,\n        handleStopTyping,\n        handleMessageSync,\n        handleServerShutdown\n    ]);\n    \n    return {\n        // e.g., isSocketConnected: socket?.connected,\n    };\n};","import { RouteConfig } from \"@models/routes.types\";\nimport { routeConfig } from \"../config/routes.config\";\nimport { Permission } from \"@models/Permission.types\";\n\nexport const findRouteByPath = (routes: RouteConfig[], path: string): RouteConfig | null => {\n    for (const route of routes) {\n        // Exact match\n        if (route.path === path) return route;\n\n        // Dynamic route match\n        if (route.isDynamic && matchDynamicRoute(route.path, path)) {\n            return route;\n        }\n\n        // Check children recursively\n        if (route.children) {\n            const found = findRouteByPath(route.children, path);\n            if (found) return found;\n        }\n    }\n    return null;\n};\n\nexport const matchDynamicRoute = (pattern: string, path: string): boolean => {\n    const patternParts = pattern.split('/').filter(Boolean);\n    const pathParts = path.split('/').filter(Boolean);\n\n    if (patternParts.length !== pathParts.length) return false;\n\n    return patternParts.every((part, index) => {\n        if (part.startsWith(':')) return true; // Dynamic segment\n        return part === pathParts[index];\n    });\n};\n\nexport const extractRouteParams = (pattern: string, path: string): Record<string, string> => {\n    const params: Record<string, string> = {};\n    const patternParts = pattern.split('/').filter(Boolean);\n    const pathParts = path.split('/').filter(Boolean);\n\n    patternParts.forEach((part, index) => {\n        if (part.startsWith(':')) {\n            const paramName = part.substring(1);\n            params[paramName] = pathParts[index];\n        }\n    });\n\n    return params;\n};\n\nexport const generateBreadcrumbs = (\n    routes: RouteConfig[],\n    path: string\n): Array<{ label: string; path: string; params?: Record<string, string> }> => {\n    const breadcrumbs: Array<{ label: string; path: string; params?: Record<string, string> }> = [];\n    const pathSegments = path.split('/').filter(Boolean);\n\n    let currentPath = '';\n    for (let i = 0; i < pathSegments.length; i++) {\n        currentPath += `/${pathSegments[i]}`;\n\n        // Try to find exact match first\n        let route = findRouteByPath(routes, currentPath);\n\n        // If not found, try to find dynamic route match\n        if (!route) {\n            route = findRouteByPathPattern(routes, currentPath);\n        }\n\n        if (route?.metadata?.breadcrumb && !route.metadata.hideInBreadcrumb) {\n            const params = route.isDynamic ? extractRouteParams(route.path, currentPath) : {};\n\n            let breadcrumbLabel = route.metadata.breadcrumb;\n            if (route.metadata.dynamicBreadcrumb) {\n                breadcrumbLabel = route.metadata.dynamicBreadcrumb(params);\n            }\n\n            breadcrumbs.push({\n                label: breadcrumbLabel,\n                path: currentPath,\n                params\n            });\n        }\n    }\n\n    return breadcrumbs;\n};\n\nexport const findRouteByPathPattern = (routes: RouteConfig[], path: string): RouteConfig | null => {\n    for (const route of routes) {\n        if (route.isDynamic && matchDynamicRoute(route.path, path)) {\n            return route;\n        }\n        if (route.children) {\n            const found = findRouteByPathPattern(route.children, path);\n            if (found) return found;\n        }\n    }\n    return null;\n};\n\nexport const isRouteActive = (itemPath: string, currentPath: string, matchPattern?: string, exactMatch = false): boolean => {\n    // Use custom match pattern if provided\n    if (matchPattern) {\n        const regex = new RegExp(matchPattern);\n        return regex.test(currentPath);\n    }\n\n    // Exact match\n    if (exactMatch) {\n        return itemPath === currentPath;\n    }\n\n    // Prefix match for nested routes\n    if (itemPath === '/') {\n        return currentPath === '/';\n    }\n\n    return currentPath.startsWith(itemPath);\n};\n\n\nexport interface SidebarRoute {\n    id: string;\n    path: string;\n    label: string;\n    metadata?: any;\n    resourceName?: string\n}\n\n// Updated getSidebarRoutes function to work with the guard\nexport const getSidebarRoutes = (role: string, permissions: Permission[]): SidebarRoute[] => {\n    const result: SidebarRoute[] = [];\n\n    const hasResourcePermission = (resourceName: string): boolean => {\n        if (!resourceName) return true;\n        const permission = permissions.find(p => p.name === resourceName);\n        return permission ? permission.view : false;\n    };\n\n    const traverse = (routes: RouteConfig[]) => {\n        for (const route of routes) {\n            // Role-based permission check\n            const roleAllowed = !route.permission?.roles || route.permission.roles.includes(role);\n\n            // Resource-based permission check\n            const resourceAllowed = hasResourcePermission(route.resourceName || '');\n\n            // Custom permission check\n            const customAllowed = true;\n            if (route.permission?.customCheck) {\n                // You might need to pass user object here\n                // customAllowed = route.permission.customCheck(user);\n            }\n\n            const allowed = roleAllowed && resourceAllowed && customAllowed;\n\n            if (route.showInSidebar && allowed) {\n                result.push({\n                    id: route.id,\n                    path: route.path,\n                    label: route.metadata?.title ? route.metadata.title : route.id,\n                    metadata: route.metadata,\n                    resourceName: route.resourceName,\n                });\n            }\n\n            if (route.children) {\n                traverse(route.children);\n            }\n        }\n    };\n\n    traverse(routeConfig);\n    return result;\n};\n","/**\n * MainLayout module.\n *\n * This file contains the MainLayout React component, which provides the main application layout for ScholarSync.\n * It includes the AppBar, side navigation drawer, and main content area, and manages authentication, socket initialization, and user menu interactions.\n *\n * @module MainLayout\n */\nimport Toolbar from '@mui/material/Toolbar';\nimport { AppDispatch, RootState } from '../redux/store';\nimport appRoutes from '../routes/routePaths';\nimport { authActions } from '../redux/actions/auth.actions';\nimport NotificationsIcon from '@mui/icons-material/Notifications';\nimport { setIsOptimistic } from '@redux/slices/chat.slice';\nimport { GetConversations } from '@redux/actions/chat.actions'; // GetMessages removed as it was unused\nimport { GetOnlineFriends } from '@redux/actions/userActions';\nimport { useSocketManager } from '@hooks/usesocket';\nimport { getSidebarRoutes } from '@utils/routes.utills';\nimport { useRouteGuard } from '@hooks/useRouteGuard';\nimport { useSidebarItems } from '@hooks/useSidebarItems';\nimport { socketManager } from '../services/socketManager';\nimport DashboardHeader from './DashboardHeader';\n\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport {\n    Box,\n    CssBaseline,\n    Typography,\n    IconButton,\n    Avatar,\n    Menu,\n    MenuItem,\n    Badge,\n    List,\n    ListItem,\n    ListItemButton,\n    ListItemIcon,\n    ListItemText,\n    Divider,\n    Tooltip,\n    alpha,\n    useTheme,\n    Theme,\n    Paper,\n    Chip,\n    Stack,\n} from '@mui/material';\nimport { Outlet, useLocation, useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\n\n// Icons\nimport NotificationsNoneIcon from '@mui/icons-material/NotificationsNone';\nimport SchoolIcon from '@mui/icons-material/School';\nimport ArrowBackIosIcon from '@mui/icons-material/ArrowBackIos';\nimport ArrowForwardIosIcon from '@mui/icons-material/ArrowForwardIos';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport PersonIcon from '@mui/icons-material/Person';\nimport LogoutIcon from '@mui/icons-material/Logout';\nimport FlagIcon from '@mui/icons-material/Flag';\n\nconst DRAWER_WIDTH = 260;\nconst COLLAPSED_DRAWER_WIDTH = 80;\n\nconst styles = {\n    layoutWrapper: {\n        display: 'flex',\n        height: '100vh',\n        flexFlow: 'row nowrap',\n        position: 'relative',\n        backgroundColor: (theme: Theme) => alpha(theme.palette.background.default, 0.95),\n    },\n    layoutContainer: {\n        height: '100%',\n        width: '-webkit-fill-available',\n        flexGrow: 1,\n        minWidth: 0,\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    layoutHeader: (theme: Theme) => ({\n        width: '100%',\n        minHeight: '80px',\n        paddingX: 4,\n        paddingY: 1,\n        background: `linear-gradient(135deg, ${alpha(theme.palette.background.paper, 0.9)} 0%, ${alpha(theme.palette.background.paper, 0.95)} 100%)`,\n        backdropFilter: 'blur(20px)',\n        borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n        boxShadow: `0 4px 20px ${alpha(theme.palette.common.black, 0.05)}`,\n        zIndex: 1,\n    }),\n    headerRow: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        height: '100%',\n    },\n    pageWrapper: (theme: Theme) => ({\n        flexGrow: 1,\n        padding: 1.5,\n        backgroundColor: theme.palette.background.default,\n        overflow: 'auto',\n        '&::-webkit-scrollbar': {\n            width: '8px',\n            height: '8px',\n        },\n        '&::-webkit-scrollbar-track': {\n            backgroundColor: alpha(theme.palette.divider, 0.05),\n        },\n        '&::-webkit-scrollbar-thumb': {\n            backgroundColor: alpha(theme.palette.primary.main, 0.3),\n            borderRadius: '4px',\n            '&:hover': {\n                backgroundColor: alpha(theme.palette.primary.main, 0.5),\n            },\n        },\n    }),\n};\n\nenum SideBarState {\n    EXPANDED = 1,\n    COLLAPSED,\n}\n\ninterface CustomDrawerProps {\n    location: string;\n    collapsed: boolean;\n    handleDrawerCollapse: () => void;\n    handleDrawerClose?: () => void;\n}\n\nconst CustomDrawer = React.memo(({ location, collapsed, handleDrawerCollapse }: CustomDrawerProps) => {\n    const theme = useTheme();\n    const navigate = useNavigate();\n    const user = useSelector((state: any) => state.auth.user);\n    const Permissions = useSelector((state: any) => state.auth.permissions);\n\n    const [sideBarState, setSideBarState] = useState<SideBarState>(SideBarState.EXPANDED);\n\n    // Mock menu routes - replace with your actual routes\n    const menuRoutes = useMemo(() => {\n        return getSidebarRoutes(user?.role, Permissions);\n        // return []; // Replace with actual routes\n\n    }, [user?.role, Permissions]);\n\n    const toggleSideBar = () => {\n        setTimeout(() => {\n            setSideBarState((prev) =>\n                prev === SideBarState.EXPANDED ? SideBarState.COLLAPSED : SideBarState.EXPANDED\n            );\n            document.getElementById('layout-container')?.removeAttribute('style');\n        }, 150);\n    };\n\n    const handleNavigationClick = useCallback(\n        (path: string) => {\n            navigate(path);\n        },\n        [navigate]\n    );\n\n    return (\n        <Box\n            sx={{\n                width: sideBarState === SideBarState.COLLAPSED ? COLLAPSED_DRAWER_WIDTH : DRAWER_WIDTH,\n                height: '100%',\n                position: 'relative',\n                background: `linear-gradient(180deg, ${alpha(theme.palette.background.paper, 0.98)} 0%, ${alpha(theme.palette.background.paper, 0.95)} 100%)`,\n                backdropFilter: 'blur(20px)',\n                borderRight: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                boxShadow: `4px 0 20px ${alpha(theme.palette.common.black, 0.08)}`,\n                transition: 'width 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n                display: 'flex',\n                flexDirection: 'column',\n                zIndex: 10,\n            }}\n        >\n            {/* Logo Section */}\n            <Toolbar\n                sx={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: sideBarState === SideBarState.COLLAPSED ? 'center' : 'flex-start',\n                    px: 3,\n                    py: 2.5,\n                    gap: 2,\n                }}\n            >\n                <Box\n                    sx={{\n                        width: 48,\n                        height: 48,\n                        borderRadius: '12px',\n                        background: `linear-gradient(135deg, ${theme.palette.primary.main} 0%, ${theme.palette.primary.dark} 100%)`,\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        boxShadow: `0 4px 12px ${alpha(theme.palette.primary.main, 0.3)}`,\n                    }}\n                >\n                    <SchoolIcon sx={{ fontSize: 28, color: 'white' }} />\n                </Box>\n                {sideBarState !== SideBarState.COLLAPSED && (\n                    <Typography\n                        variant=\"h6\"\n                        sx={{\n                            color: theme.palette.primary.main,\n                            fontWeight: 700,\n                            whiteSpace: 'nowrap',\n                            letterSpacing: '-0.5px',\n                        }}\n                    >\n                        Scholar Sync\n                    </Typography>\n                )}\n            </Toolbar>\n\n            <Divider sx={{ borderColor: alpha(theme.palette.divider, 0.1) }} />\n\n            {/* Navigation Items */}\n            <List\n                sx={{\n                    flexGrow: 1,\n                    gap: 0.5,\n                    overflow: 'auto',\n                    display: 'flex',\n                    flexDirection: 'column',\n                    px: 2,\n                    py: 2,\n                    '&::-webkit-scrollbar': {\n                        width: '6px',\n                    },\n                    '&::-webkit-scrollbar-track': {\n                        backgroundColor: 'transparent',\n                    },\n                    '&::-webkit-scrollbar-thumb': {\n                        backgroundColor: alpha(theme.palette.primary.main, 0.2),\n                        borderRadius: '3px',\n                    },\n                }}\n            >\n                {menuRoutes.map((route: any) => {\n                    const IconComponent = route.metadata?.icon;\n                    const isActive = location === route.path;\n\n                    return (\n                        <ListItem key={route.id} disablePadding sx={{ mb: 0.5 }}>\n                            <Tooltip\n                                title={sideBarState === SideBarState.COLLAPSED ? route.label : ''}\n                                placement=\"right\"\n                                arrow\n                                disableHoverListener={sideBarState !== SideBarState.COLLAPSED}\n                            >\n                                <ListItemButton\n                                    onClick={() => handleNavigationClick(route.path)}\n                                    sx={{\n                                        minHeight: 48,\n                                        borderRadius: '12px',\n                                        px: 2,\n                                        justifyContent: sideBarState === SideBarState.COLLAPSED ? 'center' : 'flex-start',\n                                        backgroundColor: isActive\n                                            ? alpha(theme.palette.primary.main, 0.12)\n                                            : 'transparent',\n                                        position: 'relative',\n                                        overflow: 'hidden',\n                                        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n                                        '&::before': isActive\n                                            ? {\n                                                content: '\"\"',\n                                                position: 'absolute',\n                                                left: 0,\n                                                top: '50%',\n                                                transform: 'translateY(-50%)',\n                                                width: '4px',\n                                                height: '60%',\n                                                backgroundColor: theme.palette.primary.main,\n                                                borderRadius: '0 4px 4px 0',\n                                            }\n                                            : {},\n                                        '&:hover': {\n                                            backgroundColor: isActive\n                                                ? alpha(theme.palette.primary.main, 0.15)\n                                                : alpha(theme.palette.action.hover, 0.8),\n                                            transform: 'translateX(4px)',\n                                        },\n                                    }}\n                                >\n                                    <ListItemIcon\n                                        sx={{\n                                            minWidth: 0,\n                                            mr: sideBarState === SideBarState.COLLAPSED ? 0 : 2.5,\n                                            justifyContent: 'center',\n                                            color: isActive\n                                                ? theme.palette.primary.main\n                                                : theme.palette.text.secondary,\n                                        }}\n                                    >\n                                        {IconComponent && <IconComponent fontSize=\"medium\" />}\n                                    </ListItemIcon>\n                                    {sideBarState !== SideBarState.COLLAPSED && (\n                                        <ListItemText\n                                            primary={route.label}\n                                            primaryTypographyProps={{\n                                                fontWeight: isActive ? 600 : 500,\n                                                fontSize: '0.9rem',\n                                                color: isActive\n                                                    ? theme.palette.primary.main\n                                                    : theme.palette.text.primary,\n                                            }}\n                                        />\n                                    )}\n                                </ListItemButton>\n                            </Tooltip>\n                        </ListItem>\n                    );\n                })}\n            </List>\n\n            {/* Collapse Toggle Button */}\n            <Box\n                sx={{\n                    p: 2,\n                    borderTop: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                }}\n            >\n                <IconButton\n                    onClick={toggleSideBar}\n                    sx={{\n                        width: '100%',\n                        height: 44,\n                        borderRadius: '12px',\n                        backgroundColor: alpha(theme.palette.primary.main, 0.08),\n                        transition: 'all 0.3s ease',\n                        '&:hover': {\n                            backgroundColor: alpha(theme.palette.primary.main, 0.15),\n                            transform: 'scale(1.02)',\n                        },\n                    }}\n                >\n                    {sideBarState === SideBarState.COLLAPSED ? (\n                        <ArrowForwardIosIcon\n                            sx={{ fontSize: 18, color: theme.palette.primary.main }}\n                        />\n                    ) : (\n                        <ArrowBackIosIcon\n                            sx={{ fontSize: 18, color: theme.palette.primary.main }}\n                        />\n                    )}\n                </IconButton>\n            </Box>\n        </Box>\n    );\n});\n\nexport default function MainLayout() {\n\n    useRouteGuard();\n    useSocketManager();\n\n    const theme = useTheme();\n    const dispatch = useDispatch<any>();\n    const navigate = useNavigate();\n    const location = useLocation();\n\n    const [drawerCollapsed, setDrawerCollapsed] = useState(false);\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    const [notificationAnchorEl, setNotificationAnchorEl] = useState<null | HTMLElement>(null);\n\n    const isUserMenuOpen = Boolean(anchorEl);\n    const isNotificationMenuOpen = Boolean(notificationAnchorEl);\n\n    const isAuthenticated = useSelector((state: any) => state.auth.isAuthenticated);\n    const user = useSelector((state: any) => state.auth.user);\n\n    const accessToken = useSelector((state: RootState) => state.auth.accessToken);\n    const activeConversation = useSelector((state: RootState) => state.chat.activeConversation);\n\n    useEffect(() => {\n        dispatch(setIsOptimistic({ isOptimistic: true }));\n    }, [dispatch, accessToken, user?._id, activeConversation]);\n\n    useEffect(() => {\n        if (!isAuthenticated) {\n            navigate(appRoutes.LOGIN);\n        } else {\n            dispatch(GetConversations());\n            dispatch(GetOnlineFriends());\n        }\n        // if (isAuthenticated) {\n        //     socketManager.connect(accessToken);\n        // }\n        // return () => {\n        //     socketManager.disconnect();\n        // }\n    }, [isAuthenticated, dispatch]);\n\n    const handleDrawerCollapse = useCallback(() => {\n        setDrawerCollapsed((prev) => !prev);\n    }, []);\n\n    const handleAvatarClick = useCallback((event: React.MouseEvent<HTMLElement>) => {\n        setAnchorEl(event.currentTarget);\n    }, []);\n\n    const handleNotificationsClick = useCallback((event: React.MouseEvent<HTMLElement>) => {\n        setNotificationAnchorEl(event.currentTarget);\n    }, []);\n\n    const handleNotificationsClose = useCallback(() => {\n        setNotificationAnchorEl(null);\n    }, []);\n\n    const handleMenuClose = useCallback(() => {\n        setAnchorEl(null);\n    }, []);\n\n    const handleLogout = useCallback(() => {\n        dispatch(authActions.logoutUser(navigate));\n    }, [dispatch, navigate]);\n\n    return (\n        <Box sx={styles.layoutWrapper}>\n            <CssBaseline />\n            <CustomDrawer\n                location={location.pathname}\n                collapsed={drawerCollapsed}\n                handleDrawerCollapse={handleDrawerCollapse}\n            />\n            <Box id=\"layout-container\" sx={styles.layoutContainer}>\n                {/* Header */}\n                <Box sx={styles.layoutHeader}>\n                    <Box sx={styles.headerRow}>\n                        {/* Left Section - Welcome Message */}\n                        <Box>\n                            <Typography\n                                variant=\"h5\"\n                                sx={{\n                                    fontWeight: 700,\n                                    background: `linear-gradient(135deg, ${theme.palette.primary.main} 0%, ${theme.palette.primary.dark} 100%)`,\n                                    WebkitBackgroundClip: 'text',\n                                    WebkitTextFillColor: 'transparent',\n                                    mb: 0.5,\n                                }}\n                            >\n                                Welcome back, {user?.fullname || 'Guest'}\n                            </Typography>\n                            <Typography variant=\"body2\" color=\"text.secondary\" fontWeight={500}>\n                                Manage and monitor teacher performance and profiles\n                            </Typography>\n                        </Box>\n\n                        {/* Right Section - Actions */}\n                        <Stack direction=\"row\" spacing={1.5} alignItems=\"center\">\n                            {/* Notifications */}\n                            <Tooltip title=\"Notifications\" arrow>\n                                <IconButton\n                                    onClick={handleNotificationsClick}\n                                    sx={{\n                                        width: 44,\n                                        height: 44,\n                                        borderRadius: '12px',\n                                        backgroundColor: alpha(theme.palette.background.paper, 0.8),\n                                        border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                                        transition: 'all 0.3s ease',\n                                        '&:hover': {\n                                            backgroundColor: theme.palette.background.paper,\n                                            borderColor: theme.palette.primary.main,\n                                            transform: 'translateY(-2px)',\n                                            boxShadow: `0 4px 12px ${alpha(theme.palette.primary.main, 0.2)}`,\n                                        },\n                                    }}\n                                >\n                                    <Badge\n                                        variant=\"dot\"\n                                        color=\"error\"\n                                        sx={{\n                                            '& .MuiBadge-badge': {\n                                                top: 4,\n                                                right: 4,\n                                            },\n                                        }}\n                                    >\n                                        <NotificationsNoneIcon fontSize=\"small\" />\n                                    </Badge>\n                                </IconButton>\n                            </Tooltip>\n\n                            <Divider orientation=\"vertical\" flexItem sx={{ my: 1 }} />\n\n                            {/* User Profile */}\n                            <Box\n                                onClick={handleAvatarClick}\n                                sx={{\n                                    display: 'flex',\n                                    alignItems: 'center',\n                                    gap: 1.5,\n                                    padding: '6px 12px 6px 6px',\n                                    borderRadius: '12px',\n                                    backgroundColor: alpha(theme.palette.background.paper, 0.8),\n                                    border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                                    cursor: 'pointer',\n                                    transition: 'all 0.3s ease',\n                                    '&:hover': {\n                                        backgroundColor: theme.palette.background.paper,\n                                        borderColor: theme.palette.primary.main,\n                                        transform: 'translateY(-2px)',\n                                        boxShadow: `0 4px 12px ${alpha(theme.palette.primary.main, 0.2)}`,\n                                    },\n                                }}\n                            >\n                                <Avatar\n                                    sx={{\n                                        width: 36,\n                                        height: 36,\n                                        background: `linear-gradient(135deg, ${theme.palette.primary.main} 0%, ${theme.palette.primary.dark} 100%)`,\n                                        fontSize: 14,\n                                        fontWeight: 600,\n                                        boxShadow: `0 2px 8px ${alpha(theme.palette.primary.main, 0.3)}`,\n                                    }}\n                                >\n                                    {user?.fullname?.charAt(0) || 'G'}\n                                </Avatar>\n                                <Box sx={{ display: { xs: 'none', sm: 'block' } }}>\n                                    <Typography variant=\"body2\" fontWeight={600} lineHeight={1.2}>\n                                        {user?.fullname || 'Guest User'}\n                                    </Typography>\n                                    <Typography variant=\"caption\" color=\"text.secondary\">\n                                        {user?.role || 'User'}\n                                    </Typography>\n                                </Box>\n                            </Box>\n                        </Stack>\n                    </Box>\n                </Box>\n\n                {/* Main Content Area */}\n                <Box component=\"main\" sx={styles.pageWrapper}>\n                    <Outlet />\n                </Box>\n            </Box>\n\n            {/* User Menu */}\n            <Menu\n                anchorEl={anchorEl}\n                open={isUserMenuOpen}\n                onClose={handleMenuClose}\n                PaperProps={{\n                    sx: {\n                        minWidth: 220,\n                        mt: 1,\n                        borderRadius: '12px',\n                        boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.12)}`,\n                        border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                        '& .MuiMenuItem-root': {\n                            borderRadius: '8px',\n                            mx: 1,\n                            my: 0.5,\n                            px: 2,\n                            gap: 1.5,\n                            fontSize: '0.9rem',\n                            transition: 'all 0.2s ease',\n                            '&:hover': {\n                                backgroundColor: alpha(theme.palette.primary.main, 0.08),\n                            },\n                        },\n                    },\n                }}\n                transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n                anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n            >\n                <MenuItem onClick={() => {\n                    handleMenuClose();\n                    navigate(appRoutes.PROFILE);\n                }}>\n                    <PersonIcon fontSize=\"small\" color=\"primary\" />\n                    Profile\n                </MenuItem>\n                <MenuItem onClick={() => {\n                    handleMenuClose();\n                    navigate(appRoutes.SETTINGS);\n                }}>\n                    <SettingsIcon fontSize=\"small\" color=\"primary\" />\n                    Settings\n                </MenuItem>\n                <MenuItem onClick={() => {\n                    handleMenuClose();\n                    navigate(appRoutes.FEATURE_FLAGS);\n                }}>\n                    <FlagIcon fontSize=\"small\" color=\"primary\" />\n                    Feature Control\n                </MenuItem>\n                <Divider sx={{ my: 0.5 }} />\n                <MenuItem onClick={handleLogout}>\n                    <LogoutIcon fontSize=\"small\" color=\"error\" />\n                    <Typography color=\"error.main\">Logout</Typography>\n                </MenuItem>\n            </Menu>\n\n            {/* Notifications Menu */}\n            <Menu\n                anchorEl={notificationAnchorEl}\n                open={isNotificationMenuOpen}\n                onClose={handleNotificationsClose}\n                PaperProps={{\n                    sx: {\n                        minWidth: 320,\n                        maxWidth: 400,\n                        mt: 1,\n                        borderRadius: '12px',\n                        boxShadow: `0 8px 32px ${alpha(theme.palette.common.black, 0.12)}`,\n                        border: `1px solid ${alpha(theme.palette.divider, 0.1)}`,\n                    },\n                }}\n                transformOrigin={{ horizontal: 'right', vertical: 'top' }}\n                anchorOrigin={{ horizontal: 'right', vertical: 'bottom' }}\n            >\n                <Box sx={{ p: 2, borderBottom: `1px solid ${alpha(theme.palette.divider, 0.1)}` }}>\n                    <Typography variant=\"h6\" fontWeight={600}>\n                        Notifications\n                    </Typography>\n                </Box>\n                <Box sx={{ p: 2 }}>\n                    <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\n                        No new notifications\n                    </Typography>\n                </Box>\n            </Menu>\n        </Box>\n    );\n}"],"names":["overridesResolver","props","styles","ownerState","useUtilityClasses","alignItems","classes","dense","disabled","disableGutters","divider","selected","composedClasses","composeClasses","getListItemButtonUtilityClass","ListItemButtonRoot","styled","ButtonBase","prop","rootShouldForwardProp","memoTheme","theme","listItemButtonClasses","alpha","ListItemButton","React.forwardRef","inProps","ref","useDefaultProps","autoFocus","component","children","focusVisibleClassName","className","other","context","React.useContext","ListContext","childContext","React.useMemo","listItemRef","React.useRef","useEnhancedEffect","handleRef","useForkRef","_jsx","clsx","ArrowBackIosIcon","createSvgIcon","ArrowForwardIosIcon","FlagIcon","LogoutIcon","NotificationsNoneIcon","useSocketManager","dispatch","useDispatch","accessToken","user","useSelector","state","activeConversation","handleConnect","useCallback","socket","GetMessages","ShowSnackbar","handleConnectionEstablished","data","handleConnectError","error","handleSocketError","handleMessageReceived","message","updateMsgConvo","_a","_b","handleMessageError","handleOnlineFriends","friendData","updateOnlineUsers","handleStartTyping","typingData","updateTypingConvo","handleStopTyping","handleMessageSync","messages","handleServerShutdown","handlePermissionUpdted","permissionSuccess","useEffect","setIsOptimistic","connectSocket","getSidebarRoutes","role","permissions","result","hasResourcePermission","resourceName","permission","p","traverse","routes","route","roleAllowed","resourceAllowed","customAllowed","allowed","_c","routeConfig","DRAWER_WIDTH","COLLAPSED_DRAWER_WIDTH","CustomDrawer","React","location","collapsed","handleDrawerCollapse","useTheme","navigate","useNavigate","Permissions","sideBarState","setSideBarState","useState","menuRoutes","useMemo","toggleSideBar","prev","handleNavigationClick","path","jsxs","Box","Toolbar","jsx","SchoolIcon","Typography","Divider","List","IconComponent","isActive","ListItem","Tooltip","ListItemIcon","ListItemText","IconButton","MainLayout","useRouteGuard","useLocation","drawerCollapsed","setDrawerCollapsed","anchorEl","setAnchorEl","notificationAnchorEl","setNotificationAnchorEl","isUserMenuOpen","isNotificationMenuOpen","isAuthenticated","GetConversations","GetOnlineFriends","appRoutes","handleAvatarClick","event","handleNotificationsClick","handleNotificationsClose","handleMenuClose","handleLogout","authActions","CssBaseline","Stack","Badge","Avatar","Outlet","Menu","MenuItem","PersonIcon","SettingsIcon"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}