import{r as i,R as Se,cy as V,U as fe,j,C as de,E as he,G as W,P as Ce,F as me,bZ as Te,M as ne,H as X,I as ge,b_ as ke,cB as ie,W as De}from"./index-Iayj6iCM.js";import{g as Ie,o as le,d as Le,M as Oe}from"./Modal-CwWs3I4F.js";import{a as Fe}from"./isHostComponent-Byq13FOA.js";import{a as ze}from"./List-Bn0p357_.js";function _(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function ae(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function Pe(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.startsWith(e.keys.join(""))}function A(t,e,o,C,y,d){let h=!1,p=y(t,e,e?o:!1);for(;p;){if(p===t.firstChild){if(h)return!1;h=!0}const f=C?!1:p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||!Pe(p,d)||f)p=y(t,p,o);else return p.focus(),!0}return!1}const Ke=i.forwardRef(function(e,o){const{actions:C,autoFocus:y=!1,autoFocusItem:d=!1,children:h,className:p,disabledItemsFocusable:f=!1,disableListWrap:R=!1,onKeyDown:T,variant:I="selectedMenu",...F}=e,s=i.useRef(null),g=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Se(()=>{y&&s.current.focus()},[y]),i.useImperativeHandle(C,()=>({adjustStyleForScrollbar:(r,{direction:n})=>{const u=!s.current.style.width;if(r.clientHeight<s.current.clientHeight&&u){const E=`${Ie(V(r))}px`;s.current.style[n==="rtl"?"paddingLeft":"paddingRight"]=E,s.current.style.width=`calc(100% + ${E})`}return s.current}}),[]);const z=r=>{const n=s.current,u=r.key;if(r.ctrlKey||r.metaKey||r.altKey){T&&T(r);return}const b=V(n).activeElement;if(u==="ArrowDown")r.preventDefault(),A(n,b,R,f,_);else if(u==="ArrowUp")r.preventDefault(),A(n,b,R,f,ae);else if(u==="Home")r.preventDefault(),A(n,null,R,f,_);else if(u==="End")r.preventDefault(),A(n,null,R,f,ae);else if(u.length===1){const a=g.current,v=u.toLowerCase(),D=performance.now();a.keys.length>0&&(D-a.lastTime>500?(a.keys=[],a.repeating=!0,a.previousKeyMatched=!0):a.repeating&&v!==a.keys[0]&&(a.repeating=!1)),a.lastTime=D,a.keys.push(v);const S=b&&!a.repeating&&Pe(b,a);a.previousKeyMatched&&(S||A(n,b,!1,f,_,a))?r.preventDefault():a.previousKeyMatched=!1}T&&T(r)},L=fe(s,o);let l=-1;i.Children.forEach(h,(r,n)=>{if(!i.isValidElement(r)){l===n&&(l+=1,l>=h.length&&(l=-1));return}r.props.disabled||(I==="selectedMenu"&&r.props.selected||l===-1)&&(l=n),l===n&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(l+=1,l>=h.length&&(l=-1))});const x=i.Children.map(h,(r,n)=>{if(n===l){const u={};return d&&(u.autoFocus=!0),r.props.tabIndex===void 0&&I==="selectedMenu"&&(u.tabIndex=0),i.cloneElement(r,u)}return r});return j.jsx(ze,{role:"menu",ref:L,className:p,onKeyDown:z,tabIndex:y?0:-1,...F,children:x})});function He(t){return de("MuiPopover",t)}he("MuiPopover",["root","paper"]);function ce(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function ue(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function pe(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function B(t){return typeof t=="function"?t():t}const je=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"]},He,e)},Ne=W(Oe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ye=W(Ce,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ae=i.forwardRef(function(e,o){const C=me({props:e,name:"MuiPopover"}),{action:y,anchorEl:d,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:p,anchorReference:f="anchorEl",children:R,className:T,container:I,elevation:F=8,marginThreshold:s=16,open:g,PaperProps:z={},slots:L={},slotProps:l={},transformOrigin:x={vertical:"top",horizontal:"left"},TransitionComponent:r=Te,transitionDuration:n="auto",TransitionProps:{onEntering:u,...E}={},disableScrollLock:b=!1,...a}=C,v=(l==null?void 0:l.paper)??z,D=i.useRef(),S={...C,anchorOrigin:h,anchorReference:f,elevation:F,marginThreshold:s,externalPaperSlotProps:v,transformOrigin:x,TransitionComponent:r,transitionDuration:n,TransitionProps:E},N=je(S),U=i.useCallback(()=>{if(f==="anchorPosition")return p;const c=B(d),P=(c&&c.nodeType===1?c:V(D.current).body).getBoundingClientRect();return{top:P.top+ce(P,h.vertical),left:P.left+ue(P,h.horizontal)}},[d,h.horizontal,h.vertical,p,f]),$=i.useCallback(c=>({vertical:ce(c,x.vertical),horizontal:ue(c,x.horizontal)}),[x.horizontal,x.vertical]),G=i.useCallback(c=>{const m={width:c.offsetWidth,height:c.offsetHeight},P=$(m);if(f==="none")return{top:null,left:null,transformOrigin:pe(P)};const Q=U();let K=Q.top-P.vertical,H=Q.left-P.horizontal;const ee=K+m.height,te=H+m.width,oe=le(B(d)),re=oe.innerHeight-s,se=oe.innerWidth-s;if(s!==null&&K<s){const w=K-s;K-=w,P.vertical+=w}else if(s!==null&&ee>re){const w=ee-re;K-=w,P.vertical+=w}if(s!==null&&H<s){const w=H-s;H-=w,P.horizontal+=w}else if(te>se){const w=te-se;H-=w,P.horizontal+=w}return{top:`${Math.round(K)}px`,left:`${Math.round(H)}px`,transformOrigin:pe(P)}},[d,f,U,$,s]),[M,O]=i.useState(g),k=i.useCallback(()=>{const c=D.current;if(!c)return;const m=G(c);m.top!==null&&(c.style.top=m.top),m.left!==null&&(c.style.left=m.left),c.style.transformOrigin=m.transformOrigin,O(!0)},[G]);i.useEffect(()=>(b&&window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)),[d,b,k]);const ve=(c,m)=>{u&&u(c,m),k()},Me=()=>{O(!1)};i.useEffect(()=>{g&&k()}),i.useImperativeHandle(y,()=>g?{updatePosition:()=>{k()}}:null,[g,k]),i.useEffect(()=>{if(!g)return;const c=Le(()=>{k()}),m=le(d);return m.addEventListener("resize",c),()=>{c.clear(),m.removeEventListener("resize",c)}},[d,g,k]);let Y=n;n==="auto"&&!r.muiSupportAuto&&(Y=void 0);const be=I||(d?V(B(d)).body:void 0),Z={slots:L,slotProps:{...l,paper:v}},[we,q]=ne("paper",{elementType:ye,externalForwardedProps:Z,additionalProps:{elevation:F,className:X(N.paper,v==null?void 0:v.className),style:M?v.style:{...v.style,opacity:0}},ownerState:S}),[J,{slotProps:Re,...xe}]=ne("root",{elementType:Ne,externalForwardedProps:Z,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:be,open:g},ownerState:S,className:X(N.root,T)}),Ee=fe(D,q.ref);return j.jsx(J,{...xe,...!Fe(J)&&{slotProps:Re,disableScrollLock:b},...a,ref:o,children:j.jsx(r,{appear:!0,in:g,onEntering:ve,onExited:Me,timeout:Y,...E,children:j.jsx(we,{...q,ref:Ee,children:R})})})});function We(t){return de("MuiMenu",t)}he("MuiMenu",["root","paper","list"]);const Ue={vertical:"top",horizontal:"right"},$e={vertical:"top",horizontal:"left"},Ge=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"],list:["list"]},We,e)},Ve=W(Ae,{shouldForwardProp:t=>De(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),_e=W(ye,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Be=W(Ke,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Je=i.forwardRef(function(e,o){const C=me({props:e,name:"MuiMenu"}),{autoFocus:y=!0,children:d,className:h,disableAutoFocusItem:p=!1,MenuListProps:f={},onClose:R,open:T,PaperProps:I={},PopoverClasses:F,transitionDuration:s="auto",TransitionProps:{onEntering:g,...z}={},variant:L="selectedMenu",slots:l={},slotProps:x={},...r}=C,n=ke(),u={...C,autoFocus:y,disableAutoFocusItem:p,MenuListProps:f,onEntering:g,PaperProps:I,transitionDuration:s,TransitionProps:z,variant:L},E=Ge(u),b=y&&!p&&T,a=i.useRef(null),v=(M,O)=>{a.current&&a.current.adjustStyleForScrollbar(M,{direction:n?"rtl":"ltr"}),g&&g(M,O)},D=M=>{M.key==="Tab"&&(M.preventDefault(),R&&R(M,"tabKeyDown"))};let S=-1;i.Children.map(d,(M,O)=>{i.isValidElement(M)&&(M.props.disabled||(L==="selectedMenu"&&M.props.selected||S===-1)&&(S=O))});const N=l.paper??_e,U=x.paper??I,$=ie({elementType:l.root,externalSlotProps:x.root,ownerState:u,className:[E.root,h]}),G=ie({elementType:N,externalSlotProps:U,ownerState:u,className:E.paper});return j.jsx(Ve,{onClose:R,anchorOrigin:{vertical:"bottom",horizontal:n?"right":"left"},transformOrigin:n?Ue:$e,slots:{paper:N,root:l.root},slotProps:{root:$,paper:G},open:T,ref:o,transitionDuration:s,TransitionProps:{onEntering:v,...z},ownerState:u,...r,classes:F,children:j.jsx(Be,{onKeyDown:D,actions:a,autoFocus:y&&(S===-1||p),autoFocusItem:b,variant:L,...f,className:X(E.list,f.className),children:d})})});export{Je as M,Ae as P,Ke as a};
