{"version":3,"file":"Organizations-DW1IOJGz.js","sources":["../../src/utils/auth.ts","../../src/components/Forms/OrganizationForm.tsx","../../src/redux/actions/organization.actions.ts","../../src/pages/Organizations.tsx"],"sourcesContent":["import { Organization } from \"@models/organization.modal\";\nimport { Parent } from \"@models/parent.models\";\nimport { Student } from \"@models/student.models\";\nimport { Teacher } from \"@models/teacher.modals\";\nimport { User } from \"@models/user.modals\";\n\nexport type Role = 'ADMIN' | 'TEACHER' | 'STUDENT' | 'PARENT' | 'ORGADMIN';\n\n\ntype PermissionCheck<Key extends keyof Permissions> =\n    | boolean\n    | ((user: User, data: Permissions[Key][\"dataType\"]) => boolean)\n\ntype RolesWithPermissions = {\n    [R in Role]: Partial<{\n        [Key in keyof Permissions]: Partial<{\n            [Action in Permissions[Key][\"action\"]]: PermissionCheck<Key>\n        }>\n    }>\n}\n\ntype Permissions = {\n    organizations: {\n        dataType: Organization\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    teachers: {\n        dataType: Teacher\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    students: {\n        dataType: Student\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    parents: {\n        dataType: Parent\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    departments: {\n        dataType: 'departments'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    classes: {\n        dataType: 'classes'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    courses: {\n        dataType: 'courses'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    events: {\n        dataType: 'events'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    assignments: {\n        dataType: 'assignments'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    exams: {\n        dataType: 'exams'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    attendances: {\n        dataType: 'attendances'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    notifications: {\n        dataType: 'notifications'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n    settings: {\n        dataType: 'settings'//remove this and add actual data type\n        action: \"view\" | \"create\" | \"update\" | \"delete\"\n    }\n}\n\nconst ROLES = {\n    ADMIN: {\n        organizations: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        teachers: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        students: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        parents: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        departments: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        classes: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        courses: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        events: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        assignments: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        exams: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        attendances: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        notifications: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        },\n        settings: {\n            view: true,\n            create: true,\n            update: true,\n            delete: true\n        }\n\n    },\n    TEACHER: {\n        organizations: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        teachers: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: (user: any, teacher: any) => user.id === teacher.id,\n            delete: false\n        },\n        students: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: false,\n            delete: false\n        },\n        parents: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: false,\n            delete: false\n        },\n        departments: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: false,\n            delete: false\n        },\n        classes: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: false,\n            delete: false\n        },\n        courses: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: false,\n            update: false,\n            delete: false\n        },\n        events: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            update: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            delete: false\n        },\n        assignments: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            update: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            delete: (user: any, teacher: any) => user.organizationId === teacher.organizationId\n        },\n        exams: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            update: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            delete: (user: any, teacher: any) => user.organizationId === teacher.organizationId\n        },\n        attendances: {\n            view: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            create: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            update: (user: any, teacher: any) => user.organizationId === teacher.organizationId,\n            delete: (user: any, teacher: any) => user.organizationId === teacher.organizationId\n        },\n        notifications: {\n            view: true,\n            create: false,\n            update: false,\n            delete: false\n        },\n        settings: {\n            view: true,\n            create: true,\n            update: true,\n            delete: false\n        }\n    },\n    STUDENT: {\n        organizations: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        teachers: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        students: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: (user: any, org: any) => user.organizationId === org._id,\n            delete: false\n        },\n        parents: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        departments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        classes: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        courses: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        events: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        assignments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        exams: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        attendances: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        notifications: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        settings: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        }\n    },\n    PARENT: {\n        organizations: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        teachers: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        students: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        parents: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        departments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        classes: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        courses: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        events: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        assignments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        exams: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        attendances: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        notifications: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        settings: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        }\n    },\n    ORGADMIN: {\n        organizations: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        teachers: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        students: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        parents: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        departments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        classes: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        courses: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        events: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        assignments: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        exams: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        attendances: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        notifications: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        },\n        settings: {\n            view: (user: any, org: any) => user.organizationId === org._id,\n            create: false,\n            update: false,\n            delete: false\n        }\n    },\n} as const satisfies RolesWithPermissions\n\n\nexport function hasPermission<Resource extends keyof Permissions>(\n    user: User,\n    resource: Resource,\n    action: Permissions[Resource][\"action\"],\n    data?: Permissions[Resource][\"dataType\"]\n): boolean {\n    // console.log(user)\n    // console.log(resource)\n    const role = user.role as keyof RolesWithPermissions;\n    // console.log(role)\n    const permission = (ROLES as RolesWithPermissions)[role][resource]?.[action];\n    // console.log(permission)\n\n    if (permission == null) return false;\n    // console.log(data)\n    if (typeof permission === \"boolean\") return permission;\n    return data != null && permission(user, data);\n}\n","import React, { useEffect } from 'react';\nimport { Controller, useForm, SubmitHandler } from 'react-hook-form';\nimport { TextField, Grid, Button, Box } from '@mui/material';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport dayjs, { Dayjs } from 'dayjs'; // Import Dayjs\n\ninterface OrganizationFormValues {\n    _id: string;\n    name: string;\n    category: string;\n    number: string;\n    contactEmail: string;\n    contactPhone: string;\n    website: string;\n    logo: string;\n    establishedDate: Dayjs | null;\n    description: string;\n}\n\ninterface OrganizationFormProps {\n    initialValues?: Partial<OrganizationFormValues>;\n    onSubmit: SubmitHandler<OrganizationFormValues>;\n    onClose: () => void;\n}\n\nconst OrganizationForm: React.FC<OrganizationFormProps> = ({ initialValues, onSubmit, onClose }) => {\n    const defaultValues = {\n        _id: '',\n        name: '',\n        category: '',\n        number: '',\n        contactEmail: '',\n        contactPhone: '',\n        website: '',\n        logo: '',\n        establishedDate: null,\n        description: '',\n    }\n\n    const { control, handleSubmit, formState: { errors }, reset } = useForm<OrganizationFormValues>({\n        defaultValues: defaultValues,\n    });\n\n    useEffect(() => {\n        if (initialValues) {\n            reset({\n                ...initialValues,\n                establishedDate: initialValues.establishedDate ? dayjs(initialValues.establishedDate) : null,\n            });\n        }\n    }, [initialValues, reset]);\n\n\n    const onSubmitForm: SubmitHandler<OrganizationFormValues> = (data) => {\n        // console.log(data)\n        const formattedData = {\n            ...data,\n            establishedDate: data.establishedDate ? data.establishedDate.format('YYYY-MM-DD') : null,\n        };\n        onSubmit(formattedData);\n    };\n\n    return (\n        <form onSubmit={handleSubmit(onSubmitForm)}>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"name\"\n                        control={control}\n                        rules={{ required: 'Name is required' }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Name\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.name}\n                                helperText={errors.name?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"category\"\n                        control={control}\n                        rules={{ required: 'Category is required' }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Category\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.category}\n                                helperText={errors.category?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"number\"\n                        control={control}\n                        rules={{ required: 'Number is required' }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Number\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.number}\n                                helperText={errors.number?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"contactEmail\"\n                        control={control}\n                        rules={{\n                            required: 'Contact email is required',\n                            pattern: {\n                                value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                message: \"Invalid email address\"\n                            }\n                        }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Contact Email\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.contactEmail}\n                                helperText={errors.contactEmail?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"contactPhone\"\n                        control={control}\n                        rules={{\n                            required: 'Contact phone is required',\n                            pattern: {\n                                value: /^[0-9]{10}$/,\n                                message: \"Invalid phone number\"\n                            }\n                        }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Contact Phone\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.contactPhone}\n                                helperText={errors.contactPhone?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"website\"\n                        control={control}\n                        rules={{\n                            required: 'Website is required',\n                            pattern: {\n                                value: /^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/,\n                                message: \"Invalid website URL\"\n                            }\n                        }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Website\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.website}\n                                helperText={errors.website?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"logo\"\n                        control={control}\n                        rules={{ required: 'Logo URL is required' }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                label=\"Logo URL\"\n                                size='small'\n                                fullWidth\n                                margin=\"normal\"\n                                error={!!errors.logo}\n                                helperText={errors.logo?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12} md={6}>\n                    <Controller\n                        name=\"establishedDate\"\n                        control={control}\n                        rules={{ required: 'Established date is required' }}\n                        render={({ field }) => (\n                            <DatePicker\n                                label=\"Established Date\"\n                                value={field.value} // Use value from react-hook-form (Dayjs object)\n                                onChange={(date: Dayjs | null) => field.onChange(date)} // Update value as Dayjs object\n                                slotProps={{\n                                    textField: {\n                                        size: 'small',\n                                        fullWidth: true,\n                                        margin: \"normal\",\n                                        error: !!errors.establishedDate,\n                                        helperText: errors.establishedDate?.message,\n                                    },\n                                }}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Controller\n                        name=\"description\"\n                        control={control}\n                        rules={{ required: 'Description is required' }}\n                        render={({ field }) => (\n                            <TextField\n                                {...field}\n                                size='small'\n                                label=\"Description\"\n                                fullWidth\n                                multiline\n                                rows={4}\n                                margin=\"normal\"\n                                error={!!errors.description}\n                                helperText={errors.description?.message}\n                            />\n                        )}\n                    />\n                </Grid>\n                <Grid item xs={12}>\n                    <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2 }}>\n                        <Button variant=\"outlined\" color=\"primary\" onClick={() => { reset(defaultValues); onClose(); }}>\n                            Cancel\n                        </Button>\n                        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\n                            Save\n                        </Button>\n                    </Box>\n                </Grid>\n            </Grid>\n        </form>\n    );\n};\n\nexport default OrganizationForm;\n","//create organization actions to dispatch\nimport { organizationApi } from '../../api/organization.api';\nimport { Organization } from '../../models/organization.modal';\nimport { AppDispatch } from '../store';\nimport { createOrganizationStart, createOrganizationSuccess, deleteOrganizationStart, deleteOrganizationSuccess, fetchOrganizationByIdStart, fetchOrganizationByIdSuccess, fetchOrganizationsStart, fetchOrganizationsSuccess, updateOrganizationStart, updateOrganizationSuccess } from '../slices/organization.slice';\nimport { toast } from 'react-toastify';\nimport { AsyncorganizationApi } from '@api/api';\nimport { Params } from '@models/pagination.modals';\nimport { parseQueryParams } from '@utils/parseQueryParams';\n\nconst fetchOrganizations = (params: Params) => async (dispatch: AppDispatch) => {\n    try {\n        const queryParams = parseQueryParams(params);\n\n        dispatch(fetchOrganizationsStart());\n        const response = await AsyncorganizationApi.getOrganizations(queryParams);\n        console.log(response)\n        dispatch(fetchOrganizationsSuccess(response.data.data));\n    } catch (error) {\n        toast.error(error.response?.data?.data || 'Failed to fetch organizations', {\n            autoClose: 3000,\n        });\n    }\n};\n\nconst fetchOrganizationById = (id: string) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(fetchOrganizationByIdStart()); // Set loading state to true\n        const response = await AsyncorganizationApi.getOrganizationById(id);\n        // console.log(response.data)\n        dispatch(fetchOrganizationByIdSuccess(response.data.data)); // Pass data to success action\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to fetch organization', {\n            autoClose: 3000, // Auto close after 3 seconds\n        });\n    }\n};\n\nconst createOrganization = (organization: Omit<Organization, 'createdAt' | 'updatedAt'>) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(createOrganizationStart()); // Set loading state to true\n        const response = await AsyncorganizationApi.createOrganization(organization);\n        dispatch(createOrganizationSuccess(response.data.data)); // Pass data to success action\n        return response.data;\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to fetch organization', {\n            autoClose: 3000, // Auto close after 3 seconds\n        });\n    }\n};\n\nconst updateOrganization = (organization: Omit<Organization, 'createdAt' | 'updatedAt'>) => async (dispatch: AppDispatch) => {\n    try {\n        // console.log(organization)\n        dispatch(updateOrganizationStart()); // Set loading state to true\n        const response = await AsyncorganizationApi.updateOrganization(organization, organization.id);\n        dispatch(updateOrganizationSuccess(response.data.data)); // Pass data to success action\n        return response.data;\n    } catch (error) {\n        toast.error(error.response.data.data || 'Failed to fetch organization', {\n            autoClose: 3000, // Auto close after 3 seconds\n        });\n    }\n};\n\nconst deleteOrganization = (id: string) => async (dispatch: AppDispatch) => {\n    try {\n        dispatch(deleteOrganizationStart());\n        const response = await AsyncorganizationApi.deleteOrganization(id);\n        dispatch(deleteOrganizationSuccess(id));\n        toast.info('Organization deleted successfully', {\n            autoClose: 3000,\n        });\n    } catch (error) {\n        toast.error((error as { response?: { data?: { data?: string } } })?.response?.data?.data || 'Failed to fetch organization', {\n            autoClose: 3000,\n        });\n    }\n};\n\n\nexport const organizationActions = {\n    fetchOrganizations,\n    fetchOrganizationById,\n    createOrganization,\n    updateOrganization,\n    deleteOrganization,\n}","import { GridColDef, GridRowId, GridRowModesModel } from '@mui/x-data-grid'\nimport { useCallback, useMemo, useState } from 'react'\nimport { Box } from '@mui/material'\nimport { AppDispatch, RootState } from '@redux/store'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { hasPermission } from \"@utils/auth.ts\";\nimport OrganizationForm from \"@components/Forms/OrganizationForm.tsx\";\nimport GenericModal from \"@components/GenericModal.tsx\";\nimport { organizationActions } from \"@redux/actions/organization.actions.ts\";\nimport { ReusableDataGrid } from \"@components/ReusableDataGrid.tsx\";\nimport { Params } from '@models/pagination.modals'\nimport { usePaginationParams } from '@hooks/usePaginationParams'\n\n/**\n * Organizations component displays a data grid of organizations with CRUD operations.\n * \n * @returns The Organizations component.\n */\nfunction Organizations() {\n\n    const dispatch = useDispatch<AppDispatch>()\n\n    /**\n     * Defines the columns for the data grid.\n     * \n     * @returns An array of column definitions.\n     */\n    const columns: GridColDef[] = useMemo(() => [\n        { field: 'name', headerName: 'Name', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'category', headerName: 'Category', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'number', headerName: 'Number', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'contactEmail', headerName: 'Contact Email', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'contactPhone', headerName: 'Contact Phone', flex: 1, editable: true, headerClassName: 'theme--header' },\n        // {field: 'website', headerName: 'Website', flex: 1, editable: true, headerClassName: 'theme--header'},\n        // {field: 'logo', headerName: 'Logo', flex: 1, editable: true, headerClassName: 'theme--header'},\n        {\n            field: 'establishedDate',\n            headerName: 'Established Date',\n            flex: 1,\n            editable: true,\n            headerClassName: 'theme--header'\n        },\n        { field: 'description', headerName: 'Description', flex: 1, editable: true, headerClassName: 'theme--header' },\n    ], []);\n\n    const [rowModesModel, setRowModesModel] = useState<GridRowModesModel>({});\n    const [open, setOpen] = useState(false);\n    const [modalTitle, setModalTitle] = useState<string | undefined>(undefined);\n    const [selectedRow, setSelectedRow] = useState<any>(null);\n    const { data: organizations, loading } = useSelector((state: RootState) => state.organization);\n    const user = useSelector((state: RootState) => state.auth.user);\n\n    /**\n     * Filters organizations based on user permissions.\n     * \n     * @returns An array of accessible organizations.\n     */\n    const accessibleOrganizations = useMemo(() => {\n        if (!user || !organizations?.organizations) return [];\n        return organizations.organizations.filter((org) =>\n            hasPermission(user, \"organizations\", \"view\", org)\n        );\n    }, [user, organizations]);\n\n    const fetchOrganizationsCallback = useCallback(\n        (params: Params) => {\n            dispatch(organizationActions.fetchOrganizations(params));\n        },\n        [dispatch]\n    );\n\n    const { params, setParams } = usePaginationParams(\n        {\n            page: 1,\n            limit: 10,\n            sortBy: undefined,\n            sortOrder: undefined,\n            searchTerm: undefined,\n            filters: {},\n        },\n        fetchOrganizationsCallback\n    );\n\n    const onParamasChange = (params: Params) => {\n        setParams(params);\n    };\n    /**\n     * Handles the add organization action.\n     */\n    const handleAdd = () => {\n        setSelectedRow(null);\n        setModalTitle('Add Organization');\n        handleOpen();\n    };\n\n    /**\n     * Handles the edit organization action.\n     * \n     * @param {GridRowId} id - The ID of the organization to edit.\n     */\n    const handleEdit = (id: GridRowId) => {\n        const selectedOrganization = organizations?.organizations.find((org: any) => org._id === id); // Find the row by ID\n        console.log(\"selectedOrganization\", selectedOrganization)\n        setSelectedRow(selectedOrganization);\n        setModalTitle('Edit Organization');\n        handleOpen()\n    };\n\n    /**\n     * Handles the delete organization action.\n     * \n     * @param {string} id - The ID of the organization to delete.\n     */\n    const handleDelete = async (id: string) => {\n        dispatch(organizationActions.deleteOrganization(id));\n    };\n\n    /**\n     * Handles the save organization action.\n     * \n     * @param {any} data - The data to save.\n     */\n    const handleSave = async (data: any) => {\n        if (selectedRow) {\n            dispatch(organizationActions.updateOrganization({ id: selectedRow._id, ...data }));\n        } else {\n            dispatch(organizationActions.createOrganization(data));\n        }\n        handleClose();\n    };\n\n    /**\n     * Handles the reload data action.\n     */\n    const handleReloadData = () => {\n        dispatch(organizationActions.fetchOrganizations(params));\n    };\n\n    /**\n     * Opens the modal.\n     */\n    const handleOpen = () => setOpen(true);\n    /**\n     * Closes the modal.\n     */\n    const handleClose = () => setOpen(false);\n\n    const totalRows = organizations?.totalOrganizations || 0;\n\n    return (\n        <Box sx={{ width: '100%', height: '100%' }}>\n            <ReusableDataGrid\n                columns={columns}\n                onAdd={handleAdd}\n                onDelete={handleDelete}\n                onEdit={handleEdit}\n                rows={accessibleOrganizations ?? []}\n                rowModesModel={rowModesModel}\n                setRowModesModel={setRowModesModel}\n                loading={loading}\n                reloadData={handleReloadData}\n                totalRows={totalRows}\n                paginationModel={{\n                    page: params.page - 1, // if DataGrid is 0-based\n                    pageSize: params.limit,\n                }}\n                onParamsChange={(params) => onParamasChange(params)}\n            />\n            <GenericModal\n                open={open}\n                onClose={handleClose}\n                title={modalTitle}\n            >\n                <OrganizationForm\n                    initialValues={selectedRow}\n                    onSubmit={handleSave}\n                    onClose={handleClose}\n                />\n            </GenericModal>\n        </Box>\n    );\n}\n\nexport default Organizations;"],"names":["ROLES","user","org","teacher","hasPermission","resource","action","data","role","permission","_a","OrganizationForm","initialValues","onSubmit","onClose","defaultValues","control","handleSubmit","errors","reset","useForm","useEffect","dayjs","onSubmitForm","formattedData","jsx","jsxs","Grid","Controller","field","TextField","DatePicker","date","Box","Button","fetchOrganizations","params","dispatch","queryParams","parseQueryParams","fetchOrganizationsStart","response","AsyncorganizationApi","fetchOrganizationsSuccess","error","toast","_b","fetchOrganizationById","id","fetchOrganizationByIdStart","fetchOrganizationByIdSuccess","createOrganization","organization","createOrganizationStart","createOrganizationSuccess","updateOrganization","updateOrganizationStart","updateOrganizationSuccess","deleteOrganization","deleteOrganizationStart","deleteOrganizationSuccess","organizationActions","Organizations","useDispatch","columns","useMemo","rowModesModel","setRowModesModel","useState","open","setOpen","modalTitle","setModalTitle","selectedRow","setSelectedRow","organizations","loading","useSelector","state","accessibleOrganizations","fetchOrganizationsCallback","useCallback","setParams","usePaginationParams","onParamasChange","handleAdd","handleOpen","handleEdit","selectedOrganization","handleDelete","handleSave","handleClose","handleReloadData","totalRows","ReusableDataGrid","GenericModal"],"mappings":"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"}