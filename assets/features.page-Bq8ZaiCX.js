import{r as u,bn as x,j as e,T as h,n as b,aI as g,h as p,J as j,B as y,N as P,b_ as T,b$ as v,be as w}from"./index-B6Q5p1mB.js";import{S as C}from"./Save-BBcKUFz4.js";import{c as f,T as S,a as D,b as I,d as F}from"./TableRow-lvRf61GJ.js";import{T as r}from"./TableCell-CnYRmD86.js";import{S as _}from"./Switch-BSMMeshO.js";import{C as B}from"./Container-DK9JEVS6.js";import"./SwitchBase-BDBXzfmE.js";import"./useFormControl-BFweTqSu.js";try{let s=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new s.Error().stack;n&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[n]="34f92918-c2b9-4e5a-add9-5dad562f1fa2",s._sentryDebugIdIdentifier="sentry-dbid-34f92918-c2b9-4e5a-add9-5dad562f1fa2")}catch{}function E(s=[]){const[n,a]=u.useState(s),o=u.useCallback((l,i)=>{a(d=>d.map((t,c)=>c===l?{...t,[i]:!t[i]}:t))},[]);return{permissions:n,toggle:o,setPermissions:a}}const R=({index:s,permission:n,onToggle:a})=>e.jsxs(f,{children:[e.jsx(r,{sx:{padding:"0px",paddingX:"10px"},children:e.jsx(h,{variant:"body1",fontWeight:"medium",children:n.name})}),["view","edit","delete"].map(o=>e.jsx(r,{align:"center",sx:{padding:"0px"},children:e.jsx(_,{checked:n[o],onChange:()=>a(s,o),color:o==="delete"?"error":"primary",inputProps:{"aria-label":`${n.name}-${o}`}})},o))]}),k=x.memo(R),W=({permissions:s,onToggle:n})=>e.jsx(S,{component:b,elevation:3,children:e.jsxs(D,{size:"medium",children:[e.jsx(I,{children:e.jsxs(f,{children:[e.jsx(r,{sx:{fontWeight:600},children:"Feature"}),["View","Edit","Delete"].map(a=>e.jsx(r,{align:"center",sx:{fontWeight:600},children:e.jsx(g,{label:a,size:"small",color:a==="Delete"?"error":"primary"})},a))]})}),e.jsx(F,{children:s.map((a,o)=>e.jsx(k,{index:o,permission:a,onToggle:n},a.name))})]})});function X(){const s=p(m=>m.auth.permissions);console.log("initialPermissions",s);const{_id:n}=p(m=>m.auth.user),{permissions:a,toggle:o,setPermissions:l}=E(s),i=j(),[d,t]=x.useState(!1);u.useEffect(()=>{l(s)},[s]);const c=()=>{console.table(a),console.log(n),i(w.updatePermissions(a,n)),t(!0)};return e.jsxs(B,{maxWidth:"md",sx:{overflowY:"auto",height:"100%"},children:[e.jsx(h,{variant:"h4",gutterBottom:!0,children:"Feature Permissions"}),e.jsx(y,{sx:{mb:2},children:e.jsx(P,{variant:"contained",startIcon:e.jsx(C,{}),onClick:c,disabled:a.length===0,children:"Save changes"})}),e.jsx(W,{permissions:a,onToggle:o}),e.jsx(T,{open:d,autoHideDuration:3e3,onClose:()=>t(!1),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(v,{severity:"success",onClose:()=>t(!1),children:"Permissions saved!"})})]})}export{X as default};
//# sourceMappingURL=features.page-Bq8ZaiCX.js.map
