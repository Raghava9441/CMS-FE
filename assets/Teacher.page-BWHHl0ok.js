const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Teacher.Form-BzYqzLOO.js","assets/index-Iayj6iCM.js","assets/index-ByN57GGS.css","assets/index.esm-DT5DRIWP.js","assets/Grid-CPbLDtt5.js","assets/TextField-BucTJljM.js","assets/InputBase-BjWt6y8l.js","assets/isHostComponent-Byq13FOA.js","assets/Modal-CwWs3I4F.js","assets/Menu-4fDYuzS_.js","assets/List-Bn0p357_.js","assets/MenuItem-B4ZcixFb.js","assets/listItemTextClasses-D33cD7Dv.js"])))=>i.map(i=>d[i]);
import{p as q,f as L,t as h,e as H,g as m,h as l,i as G,k as Q,l as J,m as K,n as U,o as W,q as X,s as Y,v as Z,b as $,u as ee,w as ae,x as te,r as n,y as re,j as c,B as oe,O as se,z as ce,_ as ne}from"./index-Iayj6iCM.js";import ie from"./GenericModal-DzEREtr7.js";import{u as le,R as de}from"./usePaginationParams-D-EadkPr.js";import"./DialogContent-mFzB5_Mx.js";import"./Modal-CwWs3I4F.js";import"./Slide-DtdTJVKu.js";import"./Edit-CwExJUNw.js";import"./Save-Cbz7BGnc.js";import"./Search-CyrNpi08.js";import"./isHostComponent-Byq13FOA.js";import"./KeyboardArrowRight-B2v7g9ly.js";import"./InputBase-BjWt6y8l.js";import"./MenuItem-B4ZcixFb.js";import"./List-Bn0p357_.js";import"./listItemTextClasses-D33cD7Dv.js";import"./Toolbar-Dy84SFcE.js";import"./TextField-BucTJljM.js";import"./Menu-4fDYuzS_.js";import"./Visibility-CFzAd-gA.js";import"./reselect-chQN1zS_.js";import"./ListItemText-D64mH7rW.js";import"./InputAdornment-B1la7Cdg.js";import"./Checkbox-CqLXZ7o-.js";import"./SwitchBase-eVy0UzNH.js";import"./FormControlLabel-DoYbMEM9.js";import"./LinearProgress-CCvmoNmW.js";import"./CircularProgress-C-K4l3j0.js";const he=t=>async a=>{var e,u;try{const s=q(t);a(L());const r=await h.getTeachers(s);a(H(r.data.data))}catch(s){a(m()),l.error(((u=(e=s.response)==null?void 0:e.data)==null?void 0:u.data)||"Failed to fetch organizations",{autoClose:3e3})}},me=t=>async a=>{try{a(X());const e=await h.getTeacherById(t);a(Y(e.data.data))}catch(e){a(m()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},ue=t=>async a=>{try{a(U());const e=await h.createTeacher(t);return a(W(e.data.data)),e.data}catch(e){a(m()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},pe=t=>async a=>{try{if(a(J()),t._id){const e=await h.updateTeacher(t,t._id);return a(K(e.data.data)),e.data}else throw new Error("Teacher ID is required for update")}catch(e){a(m()),e instanceof Error&&l.error(e.message||"Failed to fetch organization",{autoClose:3e3})}},fe=t=>async a=>{try{a(G());const e=await h.deleteTeacher(t);a(Q(t)),l.info(e.message||"Organization deleted successfully",{autoClose:3e3})}catch(e){a(m()),console.log(e),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},d={fetchTeachers:he,fetchTeacherById:me,createTeachers:ue,updateTeachers:pe,deleteTeachers:fe},Te=n.lazy(()=>ne(()=>import("./Teacher.Form-BzYqzLOO.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])));function Qe({route:t,routeData:a,canActivate:e}){console.log("routeData",a),console.log(e);const u=Z(),s=$(),r=ee(o=>o.teacher.data),_=ae(),{data:P,loading:E}=te(t,_);console.log("data",P);const R=n.useMemo(()=>[{field:"name",headerName:"Teacher Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"phone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"qualifications",headerName:"Qualifications",flex:1,editable:!0,headerClassName:"theme--header"},{field:"officeHours",headerName:"Office Hours",flex:1,editable:!0,headerClassName:"theme--header"},{field:"experience",headerName:"Experience",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[N,b]=n.useState({}),[j,x]=n.useState(""),[p,y]=n.useState(null),[C,S]=n.useState(!1),v=re().pathname.includes("/teachers/profile"),D=n.useCallback(o=>{s(d.fetchTeachers(o))},[s]),{params:f,setParams:z}=le({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},D),F=o=>{z(o)},O=()=>{y(null),x("Add Teacher"),w()},B=o=>{const i=r==null?void 0:r.teachers.find(g=>g._id===o);y(i||null),x("Edit Teacher"),w()},M=o=>{const i=r==null?void 0:r.teachers.find(g=>g._id===o);i&&u(ce.TEACHER_PROFILE.replace(":id",i==null?void 0:i._id))},A=async o=>{s(d.deleteTeachers(o))},I=async o=>{s(p?d.updateTeachers({...o,_id:p._id}):d.createTeachers(o)),T()},V=()=>{s(d.fetchTeachers(f))},w=()=>S(!0),T=()=>S(!1),k=(r==null?void 0:r.totalTeachers)||0;return c.jsx(oe,{sx:{width:"100%",height:"100%"},children:v?c.jsx(se,{}):c.jsxs(c.Fragment,{children:[c.jsx(de,{columns:R,onAdd:O,onDelete:A,onEdit:B,rows:(r==null?void 0:r.teachers)??[],rowModesModel:N,setRowModesModel:b,loading:E,reloadData:V,totalRows:k,paginationModel:{page:f.page-1,pageSize:f.limit},onParamsChange:F,onView:M}),c.jsx(ie,{open:C,onClose:T,title:j,children:C&&c.jsx(n.Suspense,{fallback:c.jsx("div",{children:"Loading form..."}),children:c.jsx(Te,{initialValues:p,onSubmit:I,onClose:T})})})]})})}export{Qe as default};
