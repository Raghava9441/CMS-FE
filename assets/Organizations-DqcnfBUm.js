const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OrganizationForm-C5J862oa.js","assets/index-B6Q5p1mB.js","assets/index-FJl57olM.css","assets/index.esm-BWg4JeyN.js","assets/Grid-BZIlOCxN.js","assets/TextField-CqXArht2.js","assets/useFormControl-BFweTqSu.js","assets/InputBase-DvqLZ0SM.js","assets/DatePicker-kGeQ5F1d.js","assets/InputAdornment-BOLYg3Uk.js","assets/DialogContent-ITkyIvN5.js","assets/GenericModal-lxnmMOUT.js"])))=>i.map(i=>d[i]);
import{p as j,q as B,A as u,t as F,v as c,x as k,y as L,z as G,E as V,F as q,G as H,H as J,I as K,J as Q,r,h as O,j as l,B as U,K as y}from"./index-B6Q5p1mB.js";import{u as W,R as X}from"./usePaginationParams-BufhDkfw.js";import"./Save-BBcKUFz4.js";import"./reselect-C7xKFEgn.js";import"./InputBase-DvqLZ0SM.js";import"./useFormControl-BFweTqSu.js";import"./TextField-CqXArht2.js";import"./InputAdornment-BOLYg3Uk.js";import"./Checkbox-BMGwJpsF.js";import"./SwitchBase-BDBXzfmE.js";import"./FormControlLabel-Dlj7SghN.js";import"./KeyboardArrowRight-B3CRtIMa.js";import"./TableCell-CnYRmD86.js";import"./CircularProgress-BiVxsZzW.js";try{let e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="c1fbed3b-e6c8-49ad-9292-a3143631623a",e._sentryDebugIdIdentifier="sentry-dbid-c1fbed3b-e6c8-49ad-9292-a3143631623a")}catch{}const Y={ADMIN:{organizations:{view:!0,create:!0,update:!0,delete:!0},teachers:{view:!0,create:!0,update:!0,delete:!0},students:{view:!0,create:!0,update:!0,delete:!0},parents:{view:!0,create:!0,update:!0,delete:!0},departments:{view:!0,create:!0,update:!0,delete:!0},classes:{view:!0,create:!0,update:!0,delete:!0},courses:{view:!0,create:!0,update:!0,delete:!0},events:{view:!0,create:!0,update:!0,delete:!0},assignments:{view:!0,create:!0,update:!0,delete:!0},exams:{view:!0,create:!0,update:!0,delete:!0},attendances:{view:!0,create:!0,update:!0,delete:!0},notifications:{view:!0,create:!0,update:!0,delete:!0},settings:{view:!0,create:!0,update:!0,delete:!0}},TEACHER:{organizations:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},teachers:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:(e,a)=>e.id===a.id,delete:!1},students:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:!1,delete:!1},parents:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:!1,delete:!1},departments:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:!1,delete:!1},classes:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:!1,delete:!1},courses:{view:(e,a)=>e.organizationId===a.organizationId,create:!1,update:!1,delete:!1},events:{view:(e,a)=>e.organizationId===a.organizationId,create:(e,a)=>e.organizationId===a.organizationId,update:(e,a)=>e.organizationId===a.organizationId,delete:!1},assignments:{view:(e,a)=>e.organizationId===a.organizationId,create:(e,a)=>e.organizationId===a.organizationId,update:(e,a)=>e.organizationId===a.organizationId,delete:(e,a)=>e.organizationId===a.organizationId},exams:{view:(e,a)=>e.organizationId===a.organizationId,create:(e,a)=>e.organizationId===a.organizationId,update:(e,a)=>e.organizationId===a.organizationId,delete:(e,a)=>e.organizationId===a.organizationId},attendances:{view:(e,a)=>e.organizationId===a.organizationId,create:(e,a)=>e.organizationId===a.organizationId,update:(e,a)=>e.organizationId===a.organizationId,delete:(e,a)=>e.organizationId===a.organizationId},notifications:{view:!0,create:!1,update:!1,delete:!1},settings:{view:!0,create:!0,update:!0,delete:!1}},STUDENT:{organizations:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},teachers:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},students:{view:(e,a)=>e.organizationId===a._id,create:!1,update:(e,a)=>e.organizationId===a._id,delete:!1},parents:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},departments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},classes:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},courses:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},events:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},assignments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},exams:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},attendances:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},notifications:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},settings:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1}},PARENT:{organizations:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},teachers:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},students:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},parents:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},departments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},classes:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},courses:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},events:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},assignments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},exams:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},attendances:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},notifications:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},settings:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1}},ORGADMIN:{organizations:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},teachers:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},students:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},parents:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},departments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},classes:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},courses:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},events:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},assignments:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},exams:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},attendances:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},notifications:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1},settings:{view:(e,a)=>e.organizationId===a._id,create:!1,update:!1,delete:!1}}};function Z(e,a,t,d){var g;const n=e.role,o=(g=Y[n][a])==null?void 0:g[t];return o==null?!1:typeof o=="boolean"?o:d!=null&&o(e,d)}const $=e=>async a=>{var t,d;try{const n=j(e);a(B());const o=await u.getOrganizations(n);console.log(o),a(F(o.data.data))}catch(n){c.error(((d=(t=n.response)==null?void 0:t.data)==null?void 0:d.data)||"Failed to fetch organizations",{autoClose:3e3})}},ee=e=>async a=>{try{a(J());const t=await u.getOrganizationById(e);a(K(t.data.data))}catch(t){c.error(t.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},ae=e=>async a=>{try{a(q());const t=await u.createOrganization(e);return a(H(t.data.data)),t.data}catch(t){c.error(t.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},te=e=>async a=>{try{a(G());const t=await u.updateOrganization(e,e.id);return a(V(t.data.data)),t.data}catch(t){c.error(t.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},ie=e=>async a=>{var t,d;try{a(k());const n=await u.deleteOrganization(e);a(L(e)),c.info("Organization deleted successfully",{autoClose:3e3})}catch(n){c.error(((d=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:d.data)||"Failed to fetch organization",{autoClose:3e3})}},f={fetchOrganizations:$,fetchOrganizationById:ee,createOrganization:ae,updateOrganization:te,deleteOrganization:ie},ne=r.lazy(()=>y(()=>import("./OrganizationForm-C5J862oa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),se=r.lazy(()=>y(()=>import("./GenericModal-lxnmMOUT.js"),__vite__mapDeps([11,1,2,10])));function he(){const e=Q(),a=r.useMemo(()=>[{field:"name",headerName:"Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"category",headerName:"Category",flex:1,editable:!0,headerClassName:"theme--header"},{field:"number",headerName:"Number",flex:1,editable:!0,headerClassName:"theme--header"},{field:"contactEmail",headerName:"Contact Email",flex:1,editable:!0,headerClassName:"theme--header"},{field:"contactPhone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"establishedDate",headerName:"Established Date",flex:1,editable:!0,headerClassName:"theme--header"},{field:"description",headerName:"Description",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[t,d]=r.useState({}),[n,o]=r.useState(!1),[g,v]=r.useState(void 0),[z,m]=r.useState(null),{data:s,loading:b}=O(i=>i.organization),p=O(i=>i.auth.user),x=r.useMemo(()=>!p||!(s!=null&&s.organizations)?[]:s.organizations.filter(i=>Z(p,"organizations","view",i)),[p,s]),C=r.useCallback(i=>{e(f.fetchOrganizations(i))},[e]),{params:I,setParams:S}=W({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},C),N=i=>{S(i)},E=()=>{m(null),v("Add Organization"),h()},D=i=>{const _=s==null?void 0:s.organizations.find(T=>T._id===i);console.log("selectedOrganization",_),m(_),v("Edit Organization"),h()},P=async i=>{e(f.deleteOrganization(i))},R=async i=>{e(z?f.updateOrganization({id:z._id,...i}):f.createOrganization(i)),w()},A=()=>{e(f.fetchOrganizations(I))},h=()=>o(!0),w=()=>o(!1),M=(s==null?void 0:s.totalOrganizations)||0;return l.jsxs(U,{sx:{width:"100%",height:"100%",minWidth:0,overflow:"hidden"},children:[l.jsx(X,{columns:a,onAdd:E,onDelete:P,onEdit:D,rows:x??[],rowModesModel:t,setRowModesModel:d,loading:b,reloadData:A,totalRows:M,paginationModel:{page:I.page-1,pageSize:I.limit},onParamsChange:i=>N(i)}),n&&l.jsx(r.Suspense,{fallback:l.jsx("div",{children:"Loading modal..."}),children:l.jsx(se,{open:n,onClose:w,title:g,children:l.jsx(r.Suspense,{fallback:l.jsx("div",{children:"Loading form..."}),children:l.jsx(ne,{initialValues:z,onSubmit:R,onClose:w})})})})]})}export{he as default};
//# sourceMappingURL=Organizations-DqcnfBUm.js.map
