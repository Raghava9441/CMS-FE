{"version":3,"file":"Courses.page-DhRtGitg.js","sources":["../../src/pages/Courses.page.tsx"],"sourcesContent":["import { ReusableDataGrid } from \"@components/ReusableDataGrid\";\nimport { Box } from \"@mui/material\";\nimport { GridColDef, GridRowModesModel } from \"@mui/x-data-grid\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"@redux/store\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { courseActions } from \"@redux/actions/course.actions\";\nimport { Params } from \"@models/pagination.modals\";\nimport { usePaginationParams } from \"@hooks/usePaginationParams\";\nimport { Course } from \"@models/course.modals\";\nimport { useNavigate, useLocation, Outlet } from \"react-router-dom\";\n\nfunction CoursesPage() {\n    const dispatch = useDispatch<AppDispatch>();\n    const navigate = useNavigate();\n    const location = useLocation();\n    const isViewingCourseDetails = location.pathname.includes('/courses/');\n    const coursesData = useSelector((state: RootState) => state.course.courses);\n    console.log(\"ðŸš€ ~ coursesData:\", coursesData)\n    const { isLoading } = useSelector((state: RootState) => state.course);\n\n    const columns: GridColDef[] = useMemo(() => [\n        { field: 'name', headerName: 'Course Name', flex: 1.5, editable: true, headerClassName: 'theme--header' },\n        { field: 'code', headerName: 'Course Code', flex: 0.8, editable: true, headerClassName: 'theme--header' },\n        { field: 'description', headerName: 'Description', flex: 2, editable: true, headerClassName: 'theme--header' },\n        { field: 'schedule', headerName: 'Schedule', flex: 1, editable: true, headerClassName: 'theme--header' },\n        { field: 'credits', headerName: 'Credits', flex: 0.5, editable: true, headerClassName: 'theme--header', type: 'number' },\n        { field: 'fee', headerName: 'Fee', flex: 0.8, editable: true, headerClassName: 'theme--header', type: 'number', valueFormatter: (params) => `$${params.value?.toFixed(2)}` },\n        { field: 'location', headerName: 'Location', flex: 1, editable: true, headerClassName: 'theme--header' },\n    ], []);\n\n    const [rowModesModel, setRowModesModel] = useState<GridRowModesModel>({});\n\n    const fetchCoursesCallback = useCallback(\n        (params: any) => {\n            dispatch(courseActions.fetchCourses());\n        },\n        [dispatch]\n    );\n\n    const { params, setParams } = usePaginationParams(\n        {\n            page: 1,\n            limit: 10,\n            sortBy: undefined,\n            sortOrder: undefined,\n            searchTerm: undefined,\n            filters: {},\n        },\n        fetchCoursesCallback\n    );\n\n    const onParamsChange = (params: Params) => {\n        setParams(params);\n    };\n\n    const handleAdd = () => {\n        console.log('Add course');\n    };\n\n    const handleEdit = (id: string) => {\n        const selectedCourse = coursesData.find((course: Course) => course._id === id);\n        console.log('Edit course:', selectedCourse);\n    };\n\n    const handleDelete = async (id: string) => {\n        dispatch(courseActions.deleteCourse(id));\n    };\n\n    const handleView = (id: string) => {\n        navigate(`/CMS-FE/courses/${id}`);\n    };\n\n    const reloadData = () => {\n        dispatch(courseActions.fetchCourses());\n    };\n\n    return (\n        <Box sx={{  width: '100%', height: '100%' }}>\n            {isViewingCourseDetails ? (\n                <Outlet />\n            ) : (\n                <ReusableDataGrid\n                    columns={columns}\n                    rows={coursesData?.courses || []}\n                    loading={isLoading}\n                    onAdd={handleAdd}\n                    onEdit={handleEdit}\n                    onView={handleView}\n                    onDelete={handleDelete}\n                    rowModesModel={rowModesModel}\n                    setRowModesModel={setRowModesModel}\n                    totalRows={coursesData?.length || 0}\n                    paginationModel={{ page: params.page - 1, pageSize: params.limit }}\n                    onParamsChange={onParamsChange}\n                    reloadData={reloadData}\n                />\n            )}\n        </Box>\n    );\n}\n\nexport default CoursesPage;\n\n"],"names":["CoursesPage","dispatch","useDispatch","navigate","useNavigate","isViewingCourseDetails","useLocation","coursesData","useSelector","state","isLoading","columns","useMemo","params","rowModesModel","setRowModesModel","useState","fetchCoursesCallback","useCallback","courseActions","setParams","usePaginationParams","onParamsChange","handleAdd","handleEdit","id","selectedCourse","course","handleDelete","handleView","reloadData","jsx","Box","Outlet","ReusableDataGrid"],"mappings":"qkBAYA,SAASA,GAAc,CACnB,MAAMC,EAAWC,EAAyB,EACpCC,EAAWC,EAAY,EAEvBC,EADWC,EAAY,EACW,SAAS,SAAS,WAAW,EAC/DC,EAAcC,EAAaC,GAAqBA,EAAM,OAAO,OAAO,EAClE,QAAA,IAAI,oBAAqBF,CAAW,EAC5C,KAAM,CAAE,UAAAG,CAAU,EAAIF,EAAaC,GAAqBA,EAAM,MAAM,EAE9DE,EAAwBC,EAAAA,QAAQ,IAAM,CACxC,CAAE,MAAO,OAAQ,WAAY,cAAe,KAAM,IAAK,SAAU,GAAM,gBAAiB,eAAgB,EACxG,CAAE,MAAO,OAAQ,WAAY,cAAe,KAAM,GAAK,SAAU,GAAM,gBAAiB,eAAgB,EACxG,CAAE,MAAO,cAAe,WAAY,cAAe,KAAM,EAAG,SAAU,GAAM,gBAAiB,eAAgB,EAC7G,CAAE,MAAO,WAAY,WAAY,WAAY,KAAM,EAAG,SAAU,GAAM,gBAAiB,eAAgB,EACvG,CAAE,MAAO,UAAW,WAAY,UAAW,KAAM,GAAK,SAAU,GAAM,gBAAiB,gBAAiB,KAAM,QAAS,EACvH,CAAE,MAAO,MAAO,WAAY,MAAO,KAAM,GAAK,SAAU,GAAM,gBAAiB,gBAAiB,KAAM,SAAU,eAAiBC,GAAW,OAAA,WAAIA,EAAAA,EAAO,QAAPA,YAAAA,EAAc,QAAQ,EAAE,GAAG,EAC3K,CAAE,MAAO,WAAY,WAAY,WAAY,KAAM,EAAG,SAAU,GAAM,gBAAiB,eAAgB,CAC3G,EAAG,EAAE,EAEC,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAA4B,CAAA,CAAE,EAElEC,EAAuBC,EAAA,YACxBL,GAAgB,CACJZ,EAAAkB,EAAc,cAAc,CACzC,EACA,CAAClB,CAAQ,CACb,EAEM,CAAE,OAAAY,EAAQ,UAAAO,CAAA,EAAcC,EAC1B,CACI,KAAM,EACN,MAAO,GACP,OAAQ,OACR,UAAW,OACX,WAAY,OACZ,QAAS,CAAA,CACb,EACAJ,CACJ,EAEMK,EAAkBT,GAAmB,CACvCO,EAAUP,CAAM,CACpB,EAEMU,EAAY,IAAM,CACpB,QAAQ,IAAI,YAAY,CAC5B,EAEMC,EAAcC,GAAe,CAC/B,MAAMC,EAAiBnB,EAAY,KAAMoB,GAAmBA,EAAO,MAAQF,CAAE,EACrE,QAAA,IAAI,eAAgBC,CAAc,CAC9C,EAEME,EAAe,MAAOH,GAAe,CAC9BxB,EAAAkB,EAAc,aAAaM,CAAE,CAAC,CAC3C,EAEMI,EAAcJ,GAAe,CACtBtB,EAAA,mBAAmBsB,CAAE,EAAE,CACpC,EAEMK,EAAa,IAAM,CACZ7B,EAAAkB,EAAc,cAAc,CACzC,EAEA,OACKY,EAAAA,IAAAC,EAAA,CAAI,GAAI,CAAG,MAAO,OAAQ,OAAQ,MAC9B,EAAA,SAAA3B,EACI0B,EAAA,IAAAE,EAAA,CAAO,CAAA,EAERF,EAAA,IAACG,EAAA,CACG,QAAAvB,EACA,MAAMJ,GAAA,YAAAA,EAAa,UAAW,CAAC,EAC/B,QAASG,EACT,MAAOa,EACP,OAAQC,EACR,OAAQK,EACR,SAAUD,EACV,cAAAd,EACA,iBAAAC,EACA,WAAWR,GAAA,YAAAA,EAAa,SAAU,EAClC,gBAAiB,CAAE,KAAMM,EAAO,KAAO,EAAG,SAAUA,EAAO,KAAM,EACjE,eAAAS,EACA,WAAAQ,CAAA,CAAA,EAGZ,CAER"}