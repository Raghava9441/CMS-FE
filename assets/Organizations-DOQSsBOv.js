const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OrganizationForm-BZFEHXqm.js","assets/index-B_cqZJjc.js","assets/index-ByN57GGS.css","assets/index.esm-Dp1cijLg.js","assets/Grid-CvVXWlm9.js","assets/TextField-ClGj9etd.js","assets/InputBase-DZRnDgal.js","assets/isHostComponent-DI6Zuu5e.js","assets/Modal-Du6OQ6mG.js","assets/Menu-e_9qz1_v.js","assets/List-BPqtGCWZ.js","assets/DatePicker-DnW__EfO.js","assets/useMediaQuery-B7d5C5rB.js","assets/InputAdornment-DUdQhZFs.js","assets/DialogContent-YmIWMa_G.js","assets/ListItem-BODdqm9C.js","assets/GenericModal-DRmTlWuR.js","assets/Slide-Ccc21anO.js"])))=>i.map(i=>d[i]);
import{p as F,aF as I,aG as h,aH as L,h as l,aI as T,aJ as k,aK as G,aL as V,aM as q,aN as H,aO as J,aP as K,b as Q,r as n,u as x,j as i,B as W,_ as S}from"./index-B_cqZJjc.js";import{h as U}from"./auth-CvwlPVjT.js";import{u as X,R as Y}from"./usePaginationParams-CJmsz9yU.js";import"./Edit-kS102nZz.js";import"./Save-gzNur6WS.js";import"./Search-DHSeIu6K.js";import"./isHostComponent-DI6Zuu5e.js";import"./KeyboardArrowRight-D4fgx2v_.js";import"./InputBase-DZRnDgal.js";import"./Modal-Du6OQ6mG.js";import"./MenuItem-B4_Mu9KU.js";import"./List-BPqtGCWZ.js";import"./listItemTextClasses-CDVTXtLO.js";import"./Toolbar-CGqPdFQv.js";import"./TextField-ClGj9etd.js";import"./Menu-e_9qz1_v.js";import"./Visibility-C7dMWSp3.js";import"./reselect-chQN1zS_.js";import"./ListItemText-CtyCBBH7.js";import"./InputAdornment-DUdQhZFs.js";import"./Checkbox-2PS_Y14Y.js";import"./SwitchBase-TI0bsxNd.js";import"./FormControlLabel-BAAYPI9o.js";import"./LinearProgress-CV2szxl6.js";import"./CircularProgress-0PMFYM1C.js";const Z=a=>async o=>{var e,d;try{const r=F(a);o(I());const c=await h.getOrganizations(r);console.log(c),o(L(c.data.data))}catch(r){l.error(((d=(e=r.response)==null?void 0:e.data)==null?void 0:d.data)||"Failed to fetch organizations",{autoClose:3e3})}},$=a=>async o=>{try{o(J());const e=await h.getOrganizationById(a);o(K(e.data.data))}catch(e){l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},ee=a=>async o=>{try{o(q());const e=await h.createOrganization(a);return o(H(e.data.data)),e.data}catch(e){l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},ae=a=>async o=>{try{o(G());const e=await h.updateOrganization(a,a.id);return o(V(e.data.data)),e.data}catch(e){l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},te=a=>async o=>{var e,d;try{o(T());const r=await h.deleteOrganization(a);o(k(a)),l.info("Organization deleted successfully",{autoClose:3e3})}catch(r){l.error(((d=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:d.data)||"Failed to fetch organization",{autoClose:3e3})}},m={fetchOrganizations:Z,fetchOrganizationById:$,createOrganization:ee,updateOrganization:ae,deleteOrganization:te},oe=n.lazy(()=>S(()=>import("./OrganizationForm-BZFEHXqm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]))),re=n.lazy(()=>S(()=>import("./GenericModal-DRmTlWuR.js"),__vite__mapDeps([16,1,2,14,8,17])));function De(){const a=Q(),o=n.useMemo(()=>[{field:"name",headerName:"Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"category",headerName:"Category",flex:1,editable:!0,headerClassName:"theme--header"},{field:"number",headerName:"Number",flex:1,editable:!0,headerClassName:"theme--header"},{field:"contactEmail",headerName:"Contact Email",flex:1,editable:!0,headerClassName:"theme--header"},{field:"contactPhone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"establishedDate",headerName:"Established Date",flex:1,editable:!0,headerClassName:"theme--header"},{field:"description",headerName:"Description",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[e,d]=n.useState({}),[r,c]=n.useState(!1),[b,z]=n.useState(void 0),[u,O]=n.useState(null),{data:s,loading:N}=x(t=>t.organization),g=x(t=>t.auth.user),_=n.useMemo(()=>!g||!(s!=null&&s.organizations)?[]:s.organizations.filter(t=>U(g,"organizations","view",t)),[g,s]),w=n.useCallback(t=>{a(m.fetchOrganizations(t))},[a]),{params:p,setParams:P}=X({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},w),v=t=>{P(t)},E=()=>{O(null),z("Add Organization"),y()},D=t=>{const C=s==null?void 0:s.organizations.find(B=>B._id===t);console.log("selectedOrganization",C),O(C),z("Edit Organization"),y()},j=async t=>{a(m.deleteOrganization(t))},M=async t=>{a(u?m.updateOrganization({id:u._id,...t}):m.createOrganization(t)),f()},R=()=>{a(m.fetchOrganizations(p))},y=()=>c(!0),f=()=>c(!1),A=(s==null?void 0:s.totalOrganizations)||0;return i.jsxs(W,{sx:{width:"100%",height:"100%",minWidth:0,overflow:"hidden"},children:[i.jsx(Y,{columns:o,onAdd:E,onDelete:j,onEdit:D,rows:_??[],rowModesModel:e,setRowModesModel:d,loading:N,reloadData:R,totalRows:A,paginationModel:{page:p.page-1,pageSize:p.limit},onParamsChange:t=>v(t)}),r&&i.jsx(n.Suspense,{fallback:i.jsx("div",{children:"Loading modal..."}),children:i.jsx(re,{open:r,onClose:f,title:b,children:i.jsx(n.Suspense,{fallback:i.jsx("div",{children:"Loading form..."}),children:i.jsx(oe,{initialValues:u,onSubmit:M,onClose:f})})})})]})}export{De as default};
//# sourceMappingURL=Organizations-DOQSsBOv.js.map
