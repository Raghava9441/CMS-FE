const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Teacher.Form-DGol3jM4.js","assets/index-BYPGO0xu.js","assets/index-FJl57olM.css","assets/index.esm-DchJ7rh4.js","assets/Grid-BuBS1MM_.js","assets/TextField-BQekiIf9.js","assets/useFormControl-59XZlDUP.js","assets/InputBase-JqDfyn6V.js"])))=>i.map(i=>d[i]);
import{p as k,Q as q,U as h,V as H,W as u,v as l,X as Q,Y as G,Z as J,$ as K,a0 as U,a1 as W,a2 as X,a3 as Y,a4 as Z,J as $,h as ee,a5 as ae,a6 as te,r as n,i as se,j as c,B as re,a7 as oe,a8 as ce,K as ne}from"./index-BYPGO0xu.js";import ie from"./GenericModal-BO5sxVUC.js";import{u as le,R as de}from"./usePaginationParams-CARL4R2U.js";import"./DialogContent-DHLXpHVO.js";import"./Save-Cv6aO7K7.js";import"./reselect-GriJUApp.js";import"./InputBase-JqDfyn6V.js";import"./useFormControl-59XZlDUP.js";import"./TextField-BQekiIf9.js";import"./InputAdornment-CRDLPjVz.js";import"./Checkbox-M250Iqvq.js";import"./SwitchBase-EoaJ7mAe.js";import"./FormControlLabel-9ILp0wHF.js";import"./KeyboardArrowRight-CfBrqoEq.js";import"./TableCell-yS_KhqOx.js";import"./CircularProgress-B7BzOrJN.js";const he=t=>async a=>{var e,m;try{const o=k(t);a(q());const s=await h.getTeachers(o);a(H(s.data.data))}catch(o){a(u()),l.error(((m=(e=o.response)==null?void 0:e.data)==null?void 0:m.data)||"Failed to fetch organizations",{autoClose:3e3})}},ue=t=>async a=>{try{a(X());const e=await h.getTeacherById(t);a(Y(e.data.data))}catch(e){a(u()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},me=t=>async a=>{try{a(U());const e=await h.createTeacher(t);return a(W(e.data.data)),e.data}catch(e){a(u()),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},fe=t=>async a=>{try{if(a(J()),t._id){const e=await h.updateTeacher(t,t._id);return a(K(e.data.data)),e.data}else throw new Error("Teacher ID is required for update")}catch(e){a(u()),e instanceof Error&&l.error(e.message||"Failed to fetch organization",{autoClose:3e3})}},pe=t=>async a=>{try{a(Q());const e=await h.deleteTeacher(t);a(G(t)),l.info(e.message||"Organization deleted successfully",{autoClose:3e3})}catch(e){a(u()),console.log(e),l.error(e.response.data.data||"Failed to fetch organization",{autoClose:3e3})}},d={fetchTeachers:he,fetchTeacherById:ue,createTeachers:me,updateTeachers:fe,deleteTeachers:pe},Te=n.lazy(()=>ne(()=>import("./Teacher.Form-DGol3jM4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])));function Be({route:t,routeData:a,canActivate:e}){console.log("routeData",a),console.log(e);const m=Z(),o=$(),s=ee(r=>r.teacher.data),_=ae(),{data:P,loading:E}=te(t,_);console.log("data",P);const R=n.useMemo(()=>[{field:"name",headerName:"Teacher Name",flex:1,editable:!0,headerClassName:"theme--header"},{field:"phone",headerName:"Contact Phone",flex:1,editable:!0,headerClassName:"theme--header"},{field:"qualifications",headerName:"Qualifications",flex:1,editable:!0,headerClassName:"theme--header"},{field:"officeHours",headerName:"Office Hours",flex:1,editable:!0,headerClassName:"theme--header"},{field:"experience",headerName:"Experience",flex:1,editable:!0,headerClassName:"theme--header"}],[]),[N,b]=n.useState({}),[j,x]=n.useState(""),[f,y]=n.useState(null),[C,S]=n.useState(!1),v=se().pathname.includes("/teachers/profile"),D=n.useCallback(r=>{o(d.fetchTeachers(r))},[o]),{params:p,setParams:F}=le({page:1,limit:10,sortBy:void 0,sortOrder:void 0,searchTerm:void 0,filters:{}},D),z=r=>{F(r)},B=()=>{y(null),x("Add Teacher"),w()},M=r=>{const i=s==null?void 0:s.teachers.find(g=>g._id===r);y(i||null),x("Edit Teacher"),w()},O=r=>{const i=s==null?void 0:s.teachers.find(g=>g._id===r);i&&m(ce.TEACHER_PROFILE.replace(":id",i==null?void 0:i._id))},A=async r=>{o(d.deleteTeachers(r))},I=async r=>{o(f?d.updateTeachers({...r,_id:f._id}):d.createTeachers(r)),T()},V=()=>{o(d.fetchTeachers(p))},w=()=>S(!0),T=()=>S(!1),L=(s==null?void 0:s.totalTeachers)||0;return c.jsx(re,{sx:{width:"100%",height:"100%"},children:v?c.jsx(oe,{}):c.jsxs(c.Fragment,{children:[c.jsx(de,{columns:R,onAdd:B,onDelete:A,onEdit:M,rows:(s==null?void 0:s.teachers)??[],rowModesModel:N,setRowModesModel:b,loading:E,reloadData:V,totalRows:L,paginationModel:{page:p.page-1,pageSize:p.limit},onParamsChange:z,onView:O}),c.jsx(ie,{open:C,onClose:T,title:j,children:C&&c.jsx(n.Suspense,{fallback:c.jsx("div",{children:"Loading form..."}),children:c.jsx(Te,{initialValues:f,onSubmit:I,onClose:T})})})]})})}export{Be as default};
//# sourceMappingURL=Teacher.page-CoPLUe3j.js.map
